<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Open-source frameworks, guides, and resources for AI development, collaboration, and creativity">
    <meta name="author" content="VibeHub">
    <title>Agent Models & Contracts - VibeHub - Human √ó AI Creative Agency</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/highlight.css">
</head>
<body>
    <div class="book-container">
        <div class="book-header">
            <div class="book-header-content">
                <h1 class="book-title">VibeHub - Human √ó AI Creative Agency</h1>
                <div class="book-header-controls">
                    <input type="search" class="search-input" placeholder="Search..." id="search-input">
                    <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
                        <span class="theme-icon">üåì</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="book-body">
            <nav class="book-sidebar">
<div class="book-sidebar-content">
<div class="sidebar-section">
<h3 class="sidebar-section-title">üè† Welcome to CURATIONS</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/readme.html">Start Here</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curations.html">About CURATIONS</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curationsla.html">About CurationsLA</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üåü Core Initiatives</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/the-curators.html">The Curators (AI Personas)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/youth-curator-movement.html">Youth Curator Movement</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üé® How We Build</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/design-systems.html">Design Systems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/technical-architecture.html">Technical Architecture</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üìö The AI √ó Human Cookbook</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/README.html">About the Cookbook</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üå± Foundations: AI Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/01-interoperability-intro.html">Introduction to Interoperability</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/02-model-garden.html">Model Garden & Foundation Models</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/03-memory-management.html">Memory Management</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üîç RAG & Knowledge Systems</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/01-rag-fundamentals.html">RAG Fundamentals</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/02-agentic-rag.html">Agentic RAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/03-graph-rag.html">GraphRAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/04-grounding.html">Grounding Techniques</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ü§ñ Agent Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/01-adk-overview.html">Agent Development Kits (ADK)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/02-agent-types.html">Agent Types</a>
</li>
<li class="sidebar-item active">
  <a href="/docs/cookbooks/agents/03-agent-models.html">Agent Models & Contracts</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/04-defining-llm-agents.html">Defining LLM Agents</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üõ†Ô∏è Tools & Integration</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/01-mcp.html">Model Context Protocol (MCP)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/02-a2a.html">Agent2Agent Protocol (A2A)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/03-tool-ecosystems.html">Tool Ecosystems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/04-agent-engines.html">AI Agent Engines</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üß† Advanced Prompting</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/README.html">Overview: Advanced Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/context-manipulation.html">Context Manipulation</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/emoji-protocol.html">Emoji Protocol</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/meta-prompting.html">Meta-Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/quantum-prompting.html">Quantum Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/temporal-debugging.html">Temporal Debugging</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üé® Business: Branding & Growth</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/README.html">Overview: AI-Powered Business</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/quantum-brand-engine.html">Quantum Brand Engine</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/brand-archaeology.html">Brand Archaeology</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/ai-discovery-singularity.html">AI Discovery Singularity (AAO)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/schema-mastery.html">Schema.org Mastery</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/creator-engine.html">Creator Singularity Engine</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üöÄ Going Legendary</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/full-stack-ai.html">Full-Stack AI Applications</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/production-deployment.html">Production Deployment</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/scaling.html">Scaling Strategies</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/the-future.html">The Future We're Building</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ü§ù Get Involved</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/get-involved.html">How to Contribute, Learn & Collaborate</a>
</li>
</ul>
</div>
</div>
</nav>

            
            <main class="book-main">
                <div class="book-content">
                    <h1 id="agent-models-api-contracts">üìã Agent Models &amp; API Contracts</h1>
<h2 id="flourishing-concept">üå≥ Flourishing Concept</h2>
<p><strong>Label</strong>: Designing Reliable Agent Interfaces</p>
<p>For AI agents to work correctly with LLMs, they must have well-defined <strong>API contracts</strong>. This contract is how the model understands what tools are available and how to use them properly.</p>
<h2 id="what-is-an-api-contract">What is an API Contract?</h2>
<p>An API contract consists of three essential components:</p>
<div class="codehilite"><pre><span></span><code><span class="err">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span>
<span class="err">‚îÇ</span><span class="w">         </span><span class="nx">API</span><span class="w"> </span><span class="nx">Contract</span><span class="w">                   </span><span class="err">‚îÇ</span>
<span class="err">‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§</span>
<span class="err">‚îÇ</span><span class="w">                                        </span><span class="err">‚îÇ</span>
<span class="err">‚îÇ</span><span class="w">  </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="nx">Function</span><span class="w"> </span><span class="nx">Signature</span><span class="w">                 </span><span class="err">‚îÇ</span>
<span class="err">‚îÇ</span><span class="w">     </span><span class="err">‚îî‚îÄ</span><span class="w"> </span><span class="nx">Names</span><span class="p">,</span><span class="w"> </span><span class="nx">parameters</span><span class="p">,</span><span class="w"> </span><span class="nx">types</span><span class="w">        </span><span class="err">‚îÇ</span>
<span class="err">‚îÇ</span><span class="w">                                        </span><span class="err">‚îÇ</span>
<span class="err">‚îÇ</span><span class="w">  </span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="nx">Docstring</span><span class="w"> </span><span class="p">(</span><span class="nx">Semantic</span><span class="w"> </span><span class="nx">Core</span><span class="p">)</span><span class="w">          </span><span class="err">‚îÇ</span>
<span class="err">‚îÇ</span><span class="w">     </span><span class="err">‚îî‚îÄ</span><span class="w"> </span><span class="nx">Purpose</span><span class="p">,</span><span class="w"> </span><span class="nx">usage</span><span class="p">,</span><span class="w"> </span><span class="nx">behavior</span><span class="w">        </span><span class="err">‚îÇ</span>
<span class="err">‚îÇ</span><span class="w">                                        </span><span class="err">‚îÇ</span>
<span class="err">‚îÇ</span><span class="w">  </span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="nx">Return</span><span class="w"> </span><span class="nx">Schema</span><span class="w">                      </span><span class="err">‚îÇ</span>
<span class="err">‚îÇ</span><span class="w">     </span><span class="err">‚îî‚îÄ</span><span class="w"> </span><span class="nx">Structure</span><span class="p">,</span><span class="w"> </span><span class="nx">status</span><span class="w"> </span><span class="nx">indicators</span><span class="w">    </span><span class="err">‚îÇ</span>
<span class="err">‚îÇ</span><span class="w">                                        </span><span class="err">‚îÇ</span>
<span class="err">‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span>
</code></pre></div>

<h2 id="component-1-function-signature">üí° Component 1: Function Signature</h2>
<h3 id="the-structural-foundation">The Structural Foundation</h3>
<p>The function signature provides the <strong>syntactic schema</strong> the model uses to generate valid arguments.</p>
<h4 id="essential-elements">Essential Elements</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">search_documents</span><span class="p">(</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>                    <span class="c1"># Type hints are MANDATORY</span>
    <span class="n">max_results</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>         <span class="c1"># Default values guide behavior</span>
    <span class="n">filter_by_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Optional parameters</span>
    <span class="n">include_archived</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>                         <span class="c1"># Return type specification</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Docstring here...&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>

<h3 id="why-type-hints-are-mandatory">Why Type Hints Are Mandatory</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ‚ùå BAD: Model doesn&#39;t know what types to use</span>
<span class="k">def</span> <span class="nf">search_documents</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">max_results</span><span class="p">,</span> <span class="n">filter_by_date</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1"># ‚úÖ GOOD: Model knows exact types expected</span>
<span class="k">def</span> <span class="nf">search_documents</span><span class="p">(</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
    <span class="n">max_results</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> 
    <span class="n">filter_by_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>

<h3 id="descriptive-parameter-names">Descriptive Parameter Names</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ‚ùå BAD: Ambiguous parameter names</span>
<span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># ‚úÖ GOOD: Self-documenting names</span>
<span class="k">def</span> <span class="nf">search_documents</span><span class="p">(</span>
    <span class="n">search_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">maximum_results</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">filter_by_category</span><span class="p">:</span> <span class="nb">bool</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>

<h3 id="real-world-example-bug-reporting-tool">Real-World Example: Bug Reporting Tool</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Literal</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="k">def</span> <span class="nf">report_bug</span><span class="p">(</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">severity</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;critical&quot;</span><span class="p">],</span>
    <span class="n">affected_components</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">reproduction_steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">expected_behavior</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">actual_behavior</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">browser</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">os</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">attachments</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Report a software bug with detailed information.</span>

<span class="sd">    Args:</span>
<span class="sd">        title: Brief summary of the bug (max 100 chars)</span>
<span class="sd">        description: Detailed description of the issue</span>
<span class="sd">        severity: Bug severity level affecting priority</span>
<span class="sd">        affected_components: List of system components impacted</span>
<span class="sd">        reproduction_steps: Step-by-step instructions to reproduce</span>
<span class="sd">        expected_behavior: What should happen</span>
<span class="sd">        actual_behavior: What actually happens</span>
<span class="sd">        browser: Browser name and version if applicable</span>
<span class="sd">        os: Operating system if relevant</span>
<span class="sd">        attachments: URLs or paths to screenshots/logs</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Created bug report with ID and status</span>
<span class="sd">            {</span>
<span class="sd">                &quot;bug_id&quot;: str,</span>
<span class="sd">                &quot;status&quot;: &quot;success&quot; | &quot;error&quot;,</span>
<span class="sd">                &quot;message&quot;: str,</span>
<span class="sd">                &quot;url&quot;: str (if success)</span>
<span class="sd">            }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Implementation</span>
    <span class="k">pass</span>
</code></pre></div>

<h2 id="component-2-docstring-the-semantic-core">üî¨ Component 2: Docstring (The Semantic Core)</h2>
<h3 id="the-primary-source-of-understanding">The Primary Source of Understanding</h3>
<p>The docstring is the <strong>most important</strong> part of the contract. It provides semantic information that helps the model understand:</p>
<ul>
<li>Tool's purpose</li>
<li>When to use it</li>
<li>How to use it correctly</li>
<li>Expected behavior</li>
<li>Edge cases</li>
</ul>
<h3 id="anatomy-of-a-perfect-docstring">Anatomy of a Perfect Docstring</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_user_details</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve comprehensive user information from the database.</span>

<span class="sd">    Use this tool when you need to look up user profile data,</span>
<span class="sd">    preferences, or account information. DO NOT use this for</span>
<span class="sd">    authentication purposes.</span>

<span class="sd">    Args:</span>
<span class="sd">        user_id: Unique user identifier (UUID format).</span>
<span class="sd">                 Example: &quot;a3b2c1d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: User information structured as:</span>
<span class="sd">            {</span>
<span class="sd">                &quot;status&quot;: &quot;success&quot; | &quot;error&quot;,</span>
<span class="sd">                &quot;user&quot;: {</span>
<span class="sd">                    &quot;id&quot;: str,</span>
<span class="sd">                    &quot;name&quot;: str,</span>
<span class="sd">                    &quot;email&quot;: str,</span>
<span class="sd">                    &quot;preferences&quot;: dict,</span>
<span class="sd">                    &quot;created_at&quot;: str (ISO 8601 format)</span>
<span class="sd">                },</span>
<span class="sd">                &quot;message&quot;: str (only present if error)</span>
<span class="sd">            }</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If user_id format is invalid</span>
<span class="sd">        UserNotFoundError: If user doesn&#39;t exist</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; details = get_user_details(&quot;a3b2c1d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d&quot;)</span>
<span class="sd">        &gt;&gt;&gt; print(details[&quot;user&quot;][&quot;name&quot;])</span>
<span class="sd">        &quot;John Doe&quot;</span>

<span class="sd">    Note:</span>
<span class="sd">        This function requires database read permissions.</span>
<span class="sd">        Results are cached for 5 minutes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Implementation</span>
    <span class="k">pass</span>
</code></pre></div>

<h3 id="best-practices-for-docstrings">Best Practices for Docstrings</h3>
<h4 id="1-clearly-define-purpose">1. Clearly Define Purpose</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">search_codebase</span><span class="p">(</span><span class="n">file_pattern</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Search the codebase for files matching a pattern.</span>

<span class="sd">    Use this tool when:</span>
<span class="sd">    - You need to find files by name or path</span>
<span class="sd">    - You want to locate where specific components are defined</span>
<span class="sd">    - You&#39;re looking for configuration files</span>

<span class="sd">    DO NOT use this tool for:</span>
<span class="sd">    - Searching file contents (use search_file_contents instead)</span>
<span class="sd">    - Finding specific code symbols (use find_symbol instead)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>

<h4 id="2-provide-usage-criteria">2. Provide Usage Criteria</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">calculate_shipping_cost</span><span class="p">(</span>
    <span class="n">weight_kg</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">destination</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">expedited</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate shipping cost for an order.</span>

<span class="sd">    **When to use:**</span>
<span class="sd">    - Customer asks &quot;How much is shipping?&quot;</span>
<span class="sd">    - During checkout process</span>
<span class="sd">    - When comparing delivery options</span>

<span class="sd">    **Prerequisites:**</span>
<span class="sd">    - Weight must be in kilograms</span>
<span class="sd">    - Destination must be a valid country code (ISO 3166-1 alpha-2)</span>
<span class="sd">    - Order must not contain restricted items</span>

<span class="sd">    **Decision logic:**</span>
<span class="sd">    - Use expedited=True only if customer explicitly requests fast shipping</span>
<span class="sd">    - Use expedited=False for standard/economy shipping</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>

<h4 id="3-specify-parameter-details">3. Specify Parameter Details</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">update_inventory</span><span class="p">(</span>
    <span class="n">product_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">quantity_change</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">reason</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;sale&quot;</span><span class="p">,</span> <span class="s2">&quot;restock&quot;</span><span class="p">,</span> <span class="s2">&quot;return&quot;</span><span class="p">,</span> <span class="s2">&quot;damage&quot;</span><span class="p">,</span> <span class="s2">&quot;adjustment&quot;</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update product inventory quantity.</span>

<span class="sd">    Args:</span>
<span class="sd">        product_id: Product SKU or unique identifier.</span>
<span class="sd">                    Format: &quot;PROD-XXXXX&quot; where X is alphanumeric.</span>
<span class="sd">                    Example: &quot;PROD-A1B2C&quot;</span>

<span class="sd">        quantity_change: Change in quantity (can be positive or negative).</span>
<span class="sd">                        Positive: Adding stock (restock, return)</span>
<span class="sd">                        Negative: Removing stock (sale, damage)</span>
<span class="sd">                        Must be non-zero.</span>

<span class="sd">        reason: Reason for inventory change. Determines accounting treatment:</span>
<span class="sd">                - &quot;sale&quot;: Customer purchase (triggers revenue recognition)</span>
<span class="sd">                - &quot;restock&quot;: New inventory received</span>
<span class="sd">                - &quot;return&quot;: Customer returned item</span>
<span class="sd">                - &quot;damage&quot;: Item damaged/unsellable</span>
<span class="sd">                - &quot;adjustment&quot;: Manual correction (requires approval)</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Updated inventory status with new quantity and transaction ID</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>

<h4 id="4-document-return-schema-thoroughly">4. Document Return Schema Thoroughly</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">process_payment</span><span class="p">(</span>
    <span class="n">amount</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">payment_method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">customer_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process a customer payment transaction.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Payment result with the following structure:</span>

<span class="sd">        Success case:</span>
<span class="sd">        {</span>
<span class="sd">            &quot;status&quot;: &quot;success&quot;,</span>
<span class="sd">            &quot;transaction_id&quot;: str,          # Unique transaction identifier</span>
<span class="sd">            &quot;amount_charged&quot;: float,        # Actual amount charged</span>
<span class="sd">            &quot;currency&quot;: str,                # ISO 4217 currency code</span>
<span class="sd">            &quot;timestamp&quot;: str,               # ISO 8601 timestamp</span>
<span class="sd">            &quot;payment_method_last4&quot;: str,    # Last 4 digits of payment method</span>
<span class="sd">            &quot;receipt_url&quot;: str              # URL to download receipt</span>
<span class="sd">        }</span>

<span class="sd">        Failure case:</span>
<span class="sd">        {</span>
<span class="sd">            &quot;status&quot;: &quot;error&quot;,</span>
<span class="sd">            &quot;error_code&quot;: str,              # Machine-readable error code</span>
<span class="sd">            &quot;error_message&quot;: str,           # Human-readable error description</span>
<span class="sd">            &quot;retry_allowed&quot;: bool,          # Whether retry is possible</span>
<span class="sd">            &quot;suggested_action&quot;: str         # What to do next</span>
<span class="sd">        }</span>

<span class="sd">    Note: Always check &#39;status&#39; field before processing other fields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>

<h2 id="component-3-return-schema">‚ö° Component 3: Return Schema</h2>
<h3 id="why-return-structure-matters">Why Return Structure Matters</h3>
<p>Agents need to <strong>reliably distinguish</strong> between successful outcomes and failures in their observation steps.</p>
<h3 id="the-status-key-pattern">The Status Key Pattern</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ‚úÖ BEST PRACTICE: Always include status indicator</span>
<span class="k">def</span> <span class="nf">execute_task</span><span class="p">(</span><span class="n">task_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute a task.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">perform_task</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>  <span class="c1"># Clear success indicator</span>
            <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span>
            <span class="s2">&quot;task_id&quot;</span><span class="p">:</span> <span class="n">task_id</span>
        <span class="p">}</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>    <span class="c1"># Clear error indicator</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
            <span class="s2">&quot;task_id&quot;</span><span class="p">:</span> <span class="n">task_id</span>
        <span class="p">}</span>
</code></pre></div>

<h3 id="consistent-return-structures">Consistent Return Structures</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ToolResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Standard response structure for all tools&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">success</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Standard success response&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">message</span><span class="p">,</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GENERAL_ERROR&quot;</span><span class="p">,</span> 
              <span class="n">recoverable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Standard error response&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">error</span><span class="p">,</span>
            <span class="s2">&quot;error_code&quot;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span>
            <span class="s2">&quot;recoverable&quot;</span><span class="p">:</span> <span class="n">recoverable</span><span class="p">,</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">partial</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">warnings</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Partial success response&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;partial&quot;</span><span class="p">,</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span>
            <span class="s2">&quot;warnings&quot;</span><span class="p">:</span> <span class="n">warnings</span><span class="p">,</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="p">}</span>


<span class="c1"># Usage in tools</span>
<span class="k">def</span> <span class="nf">search_database</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search database with standardized responses.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">results</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ToolResponse</span><span class="o">.</span><span class="n">success</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;results&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;No results found&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">ToolResponse</span><span class="o">.</span><span class="n">success</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;results&quot;</span><span class="p">:</span> <span class="n">results</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)}</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">DatabaseError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ToolResponse</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
            <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s2">&quot;DATABASE_ERROR&quot;</span><span class="p">,</span>
            <span class="n">recoverable</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
</code></pre></div>

<h2 id="complete-example-well-designed-tool">üéØ Complete Example: Well-Designed Tool</h2>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Dict</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>

<span class="k">class</span> <span class="nc">Priority</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Task priority levels&quot;&quot;&quot;</span>
    <span class="n">LOW</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">MEDIUM</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">HIGH</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">URGENT</span> <span class="o">=</span> <span class="mi">4</span>


<span class="k">def</span> <span class="nf">create_task</span><span class="p">(</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">assignee_email</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">priority</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;urgent&quot;</span><span class="p">],</span>
    <span class="n">due_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">parent_task_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">estimated_hours</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a new task in the project management system.</span>

<span class="sd">    This tool should be used when a user explicitly requests to create,</span>
<span class="sd">    add, or assign a new task. It integrates with the team&#39;s task tracking</span>
<span class="sd">    system and sends notifications to the assignee.</span>

<span class="sd">    **When to use this tool:**</span>
<span class="sd">    - User says &quot;create a task for X&quot;</span>
<span class="sd">    - User wants to assign work to someone</span>
<span class="sd">    - User mentions &quot;add this to our backlog&quot;</span>

<span class="sd">    **When NOT to use:**</span>
<span class="sd">    - Just discussing potential work (no explicit creation request)</span>
<span class="sd">    - Updating existing tasks (use update_task instead)</span>
<span class="sd">    - Querying task status (use get_task instead)</span>

<span class="sd">    Args:</span>
<span class="sd">        title: Task title (max 200 characters).</span>
<span class="sd">               Should be concise and action-oriented.</span>
<span class="sd">               Example: &quot;Implement user authentication API&quot;</span>

<span class="sd">        description: Detailed task description (supports markdown).</span>
<span class="sd">                    Include:</span>
<span class="sd">                    - Context and background</span>
<span class="sd">                    - Acceptance criteria</span>
<span class="sd">                    - Any relevant links or references</span>

<span class="sd">        assignee_email: Email of team member to assign task to.</span>
<span class="sd">                       Must be a valid team member email.</span>
<span class="sd">                       System will validate and reject invalid emails.</span>

<span class="sd">        priority: Task priority affecting schedule and notifications.</span>
<span class="sd">                 - &quot;low&quot;: Nice to have, flexible timeline</span>
<span class="sd">                 - &quot;medium&quot;: Normal priority, standard timeline</span>
<span class="sd">                 - &quot;high&quot;: Important, needs attention soon</span>
<span class="sd">                 - &quot;urgent&quot;: Critical, immediate attention required</span>

<span class="sd">        due_date: Task deadline in ISO 8601 format (YYYY-MM-DD).</span>
<span class="sd">                 Example: &quot;2024-12-31&quot;</span>
<span class="sd">                 Must be a future date.</span>

<span class="sd">        tags: Optional list of tags for categorization.</span>
<span class="sd">              Examples: [&quot;bug&quot;, &quot;frontend&quot;], [&quot;feature&quot;, &quot;api&quot;]</span>
<span class="sd">              Tags are case-insensitive and will be normalized.</span>

<span class="sd">        parent_task_id: Optional ID of parent task for sub-task creation.</span>
<span class="sd">                       If provided, this task becomes a sub-task.</span>
<span class="sd">                       Parent task must exist and be accessible.</span>

<span class="sd">        estimated_hours: Optional time estimate in hours.</span>
<span class="sd">                        Used for capacity planning and reporting.</span>
<span class="sd">                        Example: 8.5 for 8 hours 30 minutes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Task creation result with structure:</span>

<span class="sd">        Success response:</span>
<span class="sd">        {</span>
<span class="sd">            &quot;status&quot;: &quot;success&quot;,</span>
<span class="sd">            &quot;task&quot;: {</span>
<span class="sd">                &quot;id&quot;: str,                    # Unique task ID</span>
<span class="sd">                &quot;title&quot;: str,                 # Task title</span>
<span class="sd">                &quot;description&quot;: str,           # Full description</span>
<span class="sd">                &quot;assignee&quot;: {</span>
<span class="sd">                    &quot;email&quot;: str,</span>
<span class="sd">                    &quot;name&quot;: str</span>
<span class="sd">                },</span>
<span class="sd">                &quot;priority&quot;: str,              # Priority level</span>
<span class="sd">                &quot;due_date&quot;: str,              # ISO 8601 date</span>
<span class="sd">                &quot;created_at&quot;: str,            # ISO 8601 timestamp</span>
<span class="sd">                &quot;created_by&quot;: str,            # Creator email</span>
<span class="sd">                &quot;url&quot;: str,                   # Direct link to task</span>
<span class="sd">                &quot;tags&quot;: List[str],            # Normalized tags</span>
<span class="sd">                &quot;parent_task_id&quot;: str | null,</span>
<span class="sd">                &quot;estimated_hours&quot;: float | null</span>
<span class="sd">            },</span>
<span class="sd">            &quot;notifications_sent&quot;: bool,       # Whether assignee was notified</span>
<span class="sd">            &quot;message&quot;: str                    # Success message</span>
<span class="sd">        }</span>

<span class="sd">        Error response:</span>
<span class="sd">        {</span>
<span class="sd">            &quot;status&quot;: &quot;error&quot;,</span>
<span class="sd">            &quot;error_code&quot;: str,                # Machine-readable code</span>
<span class="sd">            &quot;error_message&quot;: str,             # Human-readable message</span>
<span class="sd">            &quot;field_errors&quot;: dict | null,      # Field-specific validation errors</span>
<span class="sd">            &quot;suggested_action&quot;: str           # What to do to fix</span>
<span class="sd">        }</span>

<span class="sd">        Error codes:</span>
<span class="sd">        - &quot;INVALID_EMAIL&quot;: assignee_email not found in team</span>
<span class="sd">        - &quot;INVALID_DATE&quot;: due_date is in the past or invalid format</span>
<span class="sd">        - &quot;PARENT_NOT_FOUND&quot;: parent_task_id doesn&#39;t exist</span>
<span class="sd">        - &quot;PERMISSION_DENIED&quot;: user lacks permission to assign tasks</span>
<span class="sd">        - &quot;VALIDATION_ERROR&quot;: one or more fields failed validation</span>

<span class="sd">    Raises:</span>
<span class="sd">        This function returns errors as dict; it does not raise exceptions.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; result = create_task(</span>
<span class="sd">        ...     title=&quot;Fix login bug&quot;,</span>
<span class="sd">        ...     description=&quot;Users cannot login with special characters in password&quot;,</span>
<span class="sd">        ...     assignee_email=&quot;dev@example.com&quot;,</span>
<span class="sd">        ...     priority=&quot;high&quot;,</span>
<span class="sd">        ...     due_date=&quot;2024-06-15&quot;,</span>
<span class="sd">        ...     tags=[&quot;bug&quot;, &quot;security&quot;],</span>
<span class="sd">        ...     estimated_hours=4.0</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; if result[&quot;status&quot;] == &quot;success&quot;:</span>
<span class="sd">        ...     print(f&quot;Task created: {result[&#39;task&#39;][&#39;url&#39;]}&quot;)</span>

<span class="sd">    Notes:</span>
<span class="sd">        - Task creation triggers email notification to assignee</span>
<span class="sd">        - If assignee has notifications disabled, they&#39;ll see in-app alert</span>
<span class="sd">        - Tasks with &quot;urgent&quot; priority also notify task creator&#39;s manager</span>
<span class="sd">        - Estimated hours affect team capacity calculations</span>
<span class="sd">        - All timestamps are in UTC</span>

<span class="sd">    Performance:</span>
<span class="sd">        Typical execution time: 100-300ms</span>
<span class="sd">        Includes: validation, database write, notification dispatch</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Implementation would go here</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Validate inputs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">_is_valid_email</span><span class="p">(</span><span class="n">assignee_email</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
                <span class="s2">&quot;error_code&quot;</span><span class="p">:</span> <span class="s2">&quot;INVALID_EMAIL&quot;</span><span class="p">,</span>
                <span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Email &#39;</span><span class="si">{</span><span class="n">assignee_email</span><span class="si">}</span><span class="s2">&#39; not found in team&quot;</span><span class="p">,</span>
                <span class="s2">&quot;suggested_action&quot;</span><span class="p">:</span> <span class="s2">&quot;Check email spelling or add user to team first&quot;</span>
            <span class="p">}</span>

        <span class="c1"># Create task</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">_create_task_in_db</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">assignee_email</span><span class="o">=</span><span class="n">assignee_email</span><span class="p">,</span>
            <span class="n">priority</span><span class="o">=</span><span class="n">priority</span><span class="p">,</span>
            <span class="n">due_date</span><span class="o">=</span><span class="n">due_date</span><span class="p">,</span>
            <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
            <span class="n">parent_task_id</span><span class="o">=</span><span class="n">parent_task_id</span><span class="p">,</span>
            <span class="n">estimated_hours</span><span class="o">=</span><span class="n">estimated_hours</span>
        <span class="p">)</span>

        <span class="c1"># Send notifications</span>
        <span class="n">notifications_sent</span> <span class="o">=</span> <span class="n">_send_notifications</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
            <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
            <span class="s2">&quot;notifications_sent&quot;</span><span class="p">:</span> <span class="n">notifications_sent</span><span class="p">,</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Task &#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; created and assigned to </span><span class="si">{</span><span class="n">assignee_email</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">}</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
            <span class="s2">&quot;error_code&quot;</span><span class="p">:</span> <span class="s2">&quot;INTERNAL_ERROR&quot;</span><span class="p">,</span>
            <span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
            <span class="s2">&quot;suggested_action&quot;</span><span class="p">:</span> <span class="s2">&quot;Contact system administrator&quot;</span>
        <span class="p">}</span>
</code></pre></div>

<h2 id="advanced-type-systems-for-complex-tools">üå≥ Advanced: Type Systems for Complex Tools</h2>
<h3 id="using-pydantic-for-validation">Using Pydantic for Validation</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">validator</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="k">class</span> <span class="nc">TaskInput</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validated input for task creation&quot;&quot;&quot;</span>

    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">assignee_email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^[\w\.-]+@[\w\.-]+\.\w+$&#39;</span><span class="p">)</span>
    <span class="n">priority</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;urgent&quot;</span><span class="p">]</span>
    <span class="n">due_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^\d</span><span class="si">{4}</span><span class="s1">-\d</span><span class="si">{2}</span><span class="s1">-\d</span><span class="si">{2}</span><span class="s1">$&#39;</span><span class="p">)</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_items</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s1">&#39;due_date&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">validate_future_date</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">date</span> <span class="o">&lt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;due_date must be in the future&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>


<span class="k">def</span> <span class="nf">create_task_validated</span><span class="p">(</span><span class="n">input_data</span><span class="p">:</span> <span class="n">TaskInput</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Type-safe task creation with automatic validation.</span>

<span class="sd">    Pydantic handles all input validation automatically.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Input is guaranteed to be valid here</span>
    <span class="k">pass</span>
</code></pre></div>

<h2 id="key-takeaways">üéØ Key Takeaways</h2>
<ul>
<li><strong>Function signature</strong> provides structural schema (type hints mandatory)</li>
<li><strong>Docstring</strong> is the semantic core (most important component)</li>
<li><strong>Return schema</strong> enables reliable observation (status key essential)</li>
<li><strong>Consistency</strong> across tools helps models learn patterns</li>
<li><strong>Documentation</strong> is not optional‚Äîit's part of the contract</li>
</ul>
<h2 id="common-mistakes-to-avoid">Common Mistakes to Avoid</h2>
<div class="codehilite"><pre><span></span><code><span class="c1"># ‚ùå Missing type hints</span>
<span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1"># ‚ùå Unclear parameter names</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1"># ‚ùå No docstring</span>
<span class="k">def</span> <span class="nf">important_function</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># ‚ùå Inconsistent return structure</span>
<span class="k">def</span> <span class="nf">tool1</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="k">def</span> <span class="nf">tool2</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">}</span>

<span class="c1"># ‚ùå No error handling</span>
<span class="k">def</span> <span class="nf">fragile_tool</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>  <span class="c1"># What if it fails?</span>
</code></pre></div>

<h2 id="next-steps">Next Steps</h2>
<p>Continue to <a href="./04-defining-llm-agents.md">Defining LLM Agents</a> to learn how to put these contracts together into complete agent definitions.</p>
<hr />
<p>üí° <strong>Remember</strong>: A well-defined API contract is the difference between an agent that works reliably and one that fails unpredictably.</p>
                </div>
                
                <footer class="book-footer">
                    <div class="book-footer-content">
                        <p>Built with BookGen - A modern GitBook alternative</p>
                        <p>Generated on 2025-11-15 19:18:13</p>
                    </div>
                </footer>
            </main>
            
            
        </div>
    </div>
    
    <script src="/assets/script.js"></script>
</body>
</html>