<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Open-source frameworks, guides, and resources for AI development, collaboration, and creativity">
    <meta name="author" content="VibeHub">
    <title>Agent Types - VibeHub - Human Ã— AI Creative Agency</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/highlight.css">
</head>
<body>
    <div class="book-container">
        <div class="book-header">
            <div class="book-header-content">
                <h1 class="book-title">VibeHub - Human Ã— AI Creative Agency</h1>
                <div class="book-header-controls">
                    <input type="search" class="search-input" placeholder="Search..." id="search-input">
                    <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
                        <span class="theme-icon">ğŸŒ“</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="book-body">
            <nav class="book-sidebar">
<div class="book-sidebar-content">
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ  Welcome to CURATIONS</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/readme.html">Start Here</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curations.html">About CURATIONS</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curationsla.html">About CurationsLA</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸŒŸ Core Initiatives</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/the-curators.html">The Curators (AI Personas)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/youth-curator-movement.html">Youth Curator Movement</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¨ How We Build</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/design-systems.html">Design Systems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/technical-architecture.html">Technical Architecture</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ“š The AI Ã— Human Cookbook</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/README.html">About the Cookbook</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸŒ± Foundations: AI Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/01-interoperability-intro.html">Introduction to Interoperability</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/02-model-garden.html">Model Garden & Foundation Models</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/03-memory-management.html">Memory Management</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ” RAG & Knowledge Systems</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/01-rag-fundamentals.html">RAG Fundamentals</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/02-agentic-rag.html">Agentic RAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/03-graph-rag.html">GraphRAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/04-grounding.html">Grounding Techniques</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¤– Agent Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/01-adk-overview.html">Agent Development Kits (ADK)</a>
</li>
<li class="sidebar-item active">
  <a href="/docs/cookbooks/agents/02-agent-types.html">Agent Types</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/03-agent-models.html">Agent Models & Contracts</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/04-defining-llm-agents.html">Defining LLM Agents</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ› ï¸ Tools & Integration</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/01-mcp.html">Model Context Protocol (MCP)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/02-a2a.html">Agent2Agent Protocol (A2A)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/03-tool-ecosystems.html">Tool Ecosystems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/04-agent-engines.html">AI Agent Engines</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ§  Advanced Prompting</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/README.html">Overview: Advanced Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/context-manipulation.html">Context Manipulation</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/emoji-protocol.html">Emoji Protocol</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/meta-prompting.html">Meta-Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/quantum-prompting.html">Quantum Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/temporal-debugging.html">Temporal Debugging</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¨ Business: Branding & Growth</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/README.html">Overview: AI-Powered Business</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/quantum-brand-engine.html">Quantum Brand Engine</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/brand-archaeology.html">Brand Archaeology</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/ai-discovery-singularity.html">AI Discovery Singularity (AAO)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/schema-mastery.html">Schema.org Mastery</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/creator-engine.html">Creator Singularity Engine</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸš€ Going Legendary</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/full-stack-ai.html">Full-Stack AI Applications</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/production-deployment.html">Production Deployment</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/scaling.html">Scaling Strategies</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/the-future.html">The Future We're Building</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¤ Get Involved</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/get-involved.html">How to Contribute, Learn & Collaborate</a>
</li>
</ul>
</div>
</div>
</nav>

            
            <main class="book-main">
                <div class="book-content">
                    <h1 id="agent-types-choosing-your-architecture">ğŸ­ Agent Types: Choosing Your Architecture</h1>
<h2 id="growing-concept">ğŸŒ¿ Growing Concept</h2>
<p><strong>Label</strong>: Matching Agent Design to Task Structure</p>
<p>Different tasks require different agent architectures. Understanding agent types helps you build systems that naturally fit your problem structure.</p>
<h2 id="agent-type-overview">Agent Type Overview</h2>
<div class="codehilite"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚<span class="w">            </span><span class="nv">Agent</span><span class="w"> </span><span class="nv">Types</span><span class="w">                         </span>â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚<span class="w">                                                </span>â”‚
â”‚<span class="w">  </span><span class="nv">Sequential</span><span class="w">  </span>â†’<span class="w">  </span><span class="nv">Step</span><span class="o">-</span><span class="nv">by</span><span class="o">-</span><span class="nv">step</span><span class="w"> </span><span class="nv">processing</span><span class="w">       </span>â”‚
â”‚<span class="w">  </span><span class="nv">Parallel</span><span class="w">    </span>â†’<span class="w">  </span><span class="nv">Simultaneous</span><span class="w"> </span><span class="nv">execution</span><span class="w">        </span>â”‚
â”‚<span class="w">  </span><span class="k">Loop</span><span class="w">        </span>â†’<span class="w">  </span><span class="nv">Iterative</span><span class="w"> </span><span class="nv">refinement</span><span class="w">           </span>â”‚
â”‚<span class="w">  </span><span class="nv">Custom</span><span class="w">      </span>â†’<span class="w">  </span><span class="nv">Specialized</span><span class="w"> </span><span class="nv">logic</span><span class="w">              </span>â”‚
â”‚<span class="w">                                                </span>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h2 id="sequential-agents">ğŸ¯ Sequential Agents</h2>
<h3 id="when-to-use">When to Use</h3>
<p>Tasks that require ordered, dependent steps:<br />
- Data pipelines (collect â†’ process â†’ analyze â†’ report)<br />
- Content creation (research â†’ outline â†’ write â†’ edit)<br />
- Approval workflows (submit â†’ review â†’ approve â†’ deploy)</p>
<h3 id="implementation">Implementation</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">adk</span> <span class="kn">import</span> <span class="n">SequentialAgent</span><span class="p">,</span> <span class="n">Agent</span>

<span class="k">class</span> <span class="nc">ContentCreationPipeline</span><span class="p">(</span><span class="n">SequentialAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sequential agent for content creation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">agents</span><span class="o">=</span><span class="p">[</span>
                <span class="n">Agent</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Researcher&quot;</span><span class="p">,</span>
                    <span class="n">role</span><span class="o">=</span><span class="s2">&quot;Gather information&quot;</span><span class="p">,</span>
                    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">web_search</span><span class="p">,</span> <span class="n">database_query</span><span class="p">]</span>
                <span class="p">),</span>
                <span class="n">Agent</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Outliner&quot;</span><span class="p">,</span>
                    <span class="n">role</span><span class="o">=</span><span class="s2">&quot;Structure content&quot;</span><span class="p">,</span>
                    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">outline_generator</span><span class="p">]</span>
                <span class="p">),</span>
                <span class="n">Agent</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Writer&quot;</span><span class="p">,</span>
                    <span class="n">role</span><span class="o">=</span><span class="s2">&quot;Create content&quot;</span><span class="p">,</span>
                    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">content_generator</span><span class="p">,</span> <span class="n">style_checker</span><span class="p">]</span>
                <span class="p">),</span>
                <span class="n">Agent</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Editor&quot;</span><span class="p">,</span>
                    <span class="n">role</span><span class="o">=</span><span class="s2">&quot;Refine and polish&quot;</span><span class="p">,</span>
                    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">grammar_checker</span><span class="p">,</span> <span class="n">fact_verifier</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute content creation pipeline</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Each agent processes output from previous agent</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;topic&quot;</span><span class="p">:</span> <span class="n">topic</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting: </span><span class="si">{</span><span class="n">agent</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">agent</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Completed: </span><span class="si">{</span><span class="n">agent</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Optional: validate between steps</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_output</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">agent</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> produced invalid output&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>


<span class="c1"># Usage</span>
<span class="n">pipeline</span> <span class="o">=</span> <span class="n">ContentCreationPipeline</span><span class="p">()</span>
<span class="n">article</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">create_content</span><span class="p">(</span><span class="s2">&quot;Introduction to RAG systems&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Article created: </span><span class="si">{</span><span class="n">article</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Word count: </span><span class="si">{</span><span class="n">article</span><span class="p">[</span><span class="s1">&#39;word_count&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="real-world-example-bug-triage-system">Real-World Example: Bug Triage System</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">BugTriageAgent</span><span class="p">(</span><span class="n">SequentialAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Automated bug triage workflow</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">agents</span><span class="o">=</span><span class="p">[</span>
                <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Classifier&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">bug_classifier</span><span class="p">]),</span>
                <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Prioritizer&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">priority_scorer</span><span class="p">]),</span>
                <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Assigner&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">team_matcher</span><span class="p">,</span> <span class="n">workload_checker</span><span class="p">]),</span>
                <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Notifier&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">email_sender</span><span class="p">,</span> <span class="n">slack_poster</span><span class="p">])</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">triage_bug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bug_report</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process bug through triage stages</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bug&quot;</span><span class="p">:</span> <span class="n">bug_report</span><span class="p">}</span>

        <span class="c1"># Stage 1: Classify bug type</span>
        <span class="n">context</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="c1"># context now has: category, severity</span>

        <span class="c1"># Stage 2: Determine priority</span>
        <span class="n">context</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="c1"># context now has: priority_score</span>

        <span class="c1"># Stage 3: Assign to team member</span>
        <span class="n">context</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="c1"># context now has: assigned_to</span>

        <span class="c1"># Stage 4: Send notifications</span>
        <span class="n">context</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">context</span>


<span class="c1"># Usage</span>
<span class="n">triage</span> <span class="o">=</span> <span class="n">BugTriageAgent</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">triage</span><span class="o">.</span><span class="n">triage_bug</span><span class="p">({</span>
    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Login button not responding&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;User clicks login but nothing happens&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reporter&quot;</span><span class="p">:</span> <span class="s2">&quot;user@example.com&quot;</span>
<span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bug assigned to: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;assigned_to&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Priority: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;priority_score&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h2 id="parallel-agents">âš¡ Parallel Agents</h2>
<h3 id="when-to-use_1">When to Use</h3>
<p>Tasks where multiple independent operations can run simultaneously:<br />
- Multi-perspective analysis<br />
- Parallel data processing<br />
- Redundant verification<br />
- Competitive approaches (pick best result)</p>
<h3 id="implementation_1">Implementation</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">adk</span> <span class="kn">import</span> <span class="n">ParallelAgent</span><span class="p">,</span> <span class="n">Agent</span>
<span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">class</span> <span class="nc">MultiPerspectiveAnalysis</span><span class="p">(</span><span class="n">ParallelAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parallel agent for simultaneous analysis</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">agents</span><span class="o">=</span><span class="p">[</span>
                <span class="n">Agent</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Technical Analyst&quot;</span><span class="p">,</span>
                    <span class="n">role</span><span class="o">=</span><span class="s2">&quot;Evaluate technical feasibility&quot;</span><span class="p">,</span>
                    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">code_analyzer</span><span class="p">,</span> <span class="n">architecture_reviewer</span><span class="p">]</span>
                <span class="p">),</span>
                <span class="n">Agent</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Business Analyst&quot;</span><span class="p">,</span>
                    <span class="n">role</span><span class="o">=</span><span class="s2">&quot;Assess business value&quot;</span><span class="p">,</span>
                    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">roi_calculator</span><span class="p">,</span> <span class="n">market_analyzer</span><span class="p">]</span>
                <span class="p">),</span>
                <span class="n">Agent</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;UX Analyst&quot;</span><span class="p">,</span>
                    <span class="n">role</span><span class="o">=</span><span class="s2">&quot;Evaluate user experience&quot;</span><span class="p">,</span>
                    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">usability_scorer</span><span class="p">,</span> <span class="n">accessibility_checker</span><span class="p">]</span>
                <span class="p">),</span>
                <span class="n">Agent</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Security Analyst&quot;</span><span class="p">,</span>
                    <span class="n">role</span><span class="o">=</span><span class="s2">&quot;Identify security concerns&quot;</span><span class="p">,</span>
                    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">vulnerability_scanner</span><span class="p">,</span> <span class="n">compliance_checker</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">analyze_feature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature_spec</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze feature from multiple perspectives simultaneously</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Execute all analyses in parallel</span>
        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="p">[</span>
            <span class="n">agent</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">feature_spec</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">agents</span>
        <span class="p">])</span>

        <span class="c1"># Combine perspectives</span>
        <span class="n">combined_analysis</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;technical&quot;</span><span class="p">:</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="s2">&quot;business&quot;</span><span class="p">:</span> <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="s2">&quot;ux&quot;</span><span class="p">:</span> <span class="n">results</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="s2">&quot;security&quot;</span><span class="p">:</span> <span class="n">results</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
            <span class="s2">&quot;overall_score&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_overall_score</span><span class="p">(</span><span class="n">results</span><span class="p">),</span>
            <span class="s2">&quot;recommendations&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">merge_recommendations</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">combined_analysis</span>

    <span class="k">def</span> <span class="nf">calculate_overall_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Weighted average of all perspectives</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;technical&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;business&quot;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;ux&quot;</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span> <span class="s2">&quot;security&quot;</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">}</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">s</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">scores</span><span class="p">,</span> <span class="n">weights</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>


<span class="c1"># Usage</span>
<span class="n">analyzer</span> <span class="o">=</span> <span class="n">MultiPerspectiveAnalysis</span><span class="p">()</span>
<span class="n">analysis</span> <span class="o">=</span> <span class="k">await</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_feature</span><span class="p">({</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Social login integration&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow users to login with Google/Facebook&quot;</span><span class="p">,</span>
    <span class="s2">&quot;estimated_effort&quot;</span><span class="p">:</span> <span class="s2">&quot;2 weeks&quot;</span>
<span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Overall score: </span><span class="si">{</span><span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;overall_score&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/10&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">perspective</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">analysis</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">perspective</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;overall_score&#39;</span><span class="p">,</span> <span class="s1">&#39;recommendations&#39;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">perspective</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/10 - </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="real-world-example-image-generation-with-validation">Real-World Example: Image Generation with Validation</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ImageGeneratorWithValidation</span><span class="p">(</span><span class="n">ParallelAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate multiple images and validate simultaneously</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generators</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Generator1&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;stable-diffusion&quot;</span><span class="p">),</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Generator2&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;dall-e&quot;</span><span class="p">),</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Generator3&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;midjourney&quot;</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validators</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;QualityChecker&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">quality_scorer</span><span class="p">]),</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;StyleValidator&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">style_matcher</span><span class="p">]),</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;ContentValidator&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">content_verifier</span><span class="p">])</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">generate_and_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate multiple images and validate in parallel</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Parallel generation</span>
        <span class="n">images</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="p">[</span>
            <span class="n">gen</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="k">for</span> <span class="n">gen</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generators</span>
        <span class="p">])</span>

        <span class="c1"># Parallel validation of all images</span>
        <span class="n">validation_tasks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">validator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validators</span><span class="p">:</span>
                <span class="n">validation_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">validator</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

        <span class="n">validations</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">validation_tasks</span><span class="p">)</span>

        <span class="c1"># Select best image based on validation scores</span>
        <span class="n">best_image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_best</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="n">validations</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">best_image</span>


<span class="c1"># Usage</span>
<span class="n">generator</span> <span class="o">=</span> <span class="n">ImageGeneratorWithValidation</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="k">await</span> <span class="n">generator</span><span class="o">.</span><span class="n">generate_and_validate</span><span class="p">(</span>
    <span class="s2">&quot;A serene mountain landscape at sunset with a lake&quot;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best image: </span><span class="si">{</span><span class="n">image</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (score: </span><span class="si">{</span><span class="n">image</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div>

<h2 id="loop-agents">ğŸ”„ Loop Agents</h2>
<h3 id="when-to-use_2">When to Use</h3>
<p>Tasks that require iterative refinement:<br />
- Code generation and debugging<br />
- Image/content generation until quality threshold<br />
- Optimization problems<br />
- Self-improvement workflows</p>
<h3 id="implementation_2">Implementation</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">adk</span> <span class="kn">import</span> <span class="n">LoopAgent</span><span class="p">,</span> <span class="n">Agent</span>

<span class="k">class</span> <span class="nc">CodeGeneratorWithRefinement</span><span class="p">(</span><span class="n">LoopAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loop agent that refines code until it meets criteria</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generator</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Code Generator&quot;</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">code_generation</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tester</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Code Tester&quot;</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">unit_test_runner</span><span class="p">,</span> <span class="n">static_analyzer</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reviewer</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Code Reviewer&quot;</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">quality_checker</span><span class="p">,</span> <span class="n">best_practices_validator</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">generate_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                          <span class="n">requirements</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                          <span class="n">max_iterations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
                          <span class="n">quality_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate and refine code iteratively</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">iteration</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">code</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">feedback</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">while</span> <span class="n">iteration</span> <span class="o">&lt;</span> <span class="n">max_iterations</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Iteration </span><span class="si">{</span><span class="n">iteration</span><span class="si">}</span><span class="s2"> ===&quot;</span><span class="p">)</span>

            <span class="c1"># Generate/refine code</span>
            <span class="k">if</span> <span class="n">code</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">requirements</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">process</span><span class="p">({</span>
                    <span class="s2">&quot;requirements&quot;</span><span class="p">:</span> <span class="n">requirements</span><span class="p">,</span>
                    <span class="s2">&quot;previous_code&quot;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span>
                    <span class="s2">&quot;feedback&quot;</span><span class="p">:</span> <span class="n">feedback</span>
                <span class="p">})</span>

            <span class="c1"># Test code</span>
            <span class="n">test_results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">tester</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>

            <span class="c1"># Review code quality</span>
            <span class="n">review_results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">reviewer</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>

            <span class="c1"># Check if meets criteria</span>
            <span class="n">quality_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_quality</span><span class="p">(</span><span class="n">test_results</span><span class="p">,</span> <span class="n">review_results</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Quality score: </span><span class="si">{</span><span class="n">quality_score</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">quality_score</span> <span class="o">&gt;=</span> <span class="n">quality_threshold</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ“ Code meets quality threshold!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span>
                    <span class="s2">&quot;iterations&quot;</span><span class="p">:</span> <span class="n">iteration</span><span class="p">,</span>
                    <span class="s2">&quot;quality_score&quot;</span><span class="p">:</span> <span class="n">quality_score</span><span class="p">,</span>
                    <span class="s2">&quot;test_results&quot;</span><span class="p">:</span> <span class="n">test_results</span><span class="p">,</span>
                    <span class="s2">&quot;review_results&quot;</span><span class="p">:</span> <span class="n">review_results</span>
                <span class="p">}</span>

            <span class="c1"># Prepare feedback for next iteration</span>
            <span class="n">feedback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compile_feedback</span><span class="p">(</span><span class="n">test_results</span><span class="p">,</span> <span class="n">review_results</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Issues found: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">feedback</span><span class="p">[</span><span class="s1">&#39;issues&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Max iterations reached</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span>
            <span class="s2">&quot;iterations&quot;</span><span class="p">:</span> <span class="n">iteration</span><span class="p">,</span>
            <span class="s2">&quot;quality_score&quot;</span><span class="p">:</span> <span class="n">quality_score</span><span class="p">,</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;max_iterations_reached&quot;</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">calculate_quality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_results</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">review_results</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate overall quality score</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">test_score</span> <span class="o">=</span> <span class="n">test_results</span><span class="p">[</span><span class="s1">&#39;pass_rate&#39;</span><span class="p">]</span>
        <span class="n">review_score</span> <span class="o">=</span> <span class="n">review_results</span><span class="p">[</span><span class="s1">&#39;quality_score&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">test_score</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">review_score</span> <span class="o">*</span> <span class="mf">0.4</span><span class="p">)</span>


<span class="c1"># Usage</span>
<span class="n">code_agent</span> <span class="o">=</span> <span class="n">CodeGeneratorWithRefinement</span><span class="p">()</span>

<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">code_agent</span><span class="o">.</span><span class="n">generate_code</span><span class="p">(</span>
    <span class="n">requirements</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Create a Python function that:</span>
<span class="s2">    1. Accepts a list of numbers</span>
<span class="s2">    2. Returns the median value</span>
<span class="s2">    3. Handles empty lists gracefully</span>
<span class="s2">    4. Has proper error handling</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">max_iterations</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">quality_threshold</span><span class="o">=</span><span class="mf">0.9</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Final Result ===&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Iterations needed: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;iterations&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final quality: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;quality_score&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Generated code:</span><span class="se">\n</span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="real-world-example-image-generation-with-count-verification">Real-World Example: Image Generation with Count Verification</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">FoodImageGenerator</span><span class="p">(</span><span class="n">LoopAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate images with specific food item counts</span>
<span class="sd">    Example from the requirements: &quot;five bananas&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generator</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Image Generator&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">generate_image</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Food Counter&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">count_food_items</span><span class="p">])</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">generate_with_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                                  <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                                  <span class="n">target_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                                  <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate image until correct number of items</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_attempts</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempt </span><span class="si">{</span><span class="n">attempt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">: Generating image...&quot;</span><span class="p">)</span>

            <span class="c1"># Generate image</span>
            <span class="n">image</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>

            <span class="c1"># Count items</span>
            <span class="n">count_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="n">actual_count</span> <span class="o">=</span> <span class="n">count_result</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span>

            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="n">actual_count</span><span class="si">}</span><span class="s2"> items (target: </span><span class="si">{</span><span class="n">target_count</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">actual_count</span> <span class="o">==</span> <span class="n">target_count</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="n">image</span><span class="p">,</span>
                    <span class="s2">&quot;attempts&quot;</span><span class="p">:</span> <span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
                <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="n">image</span><span class="p">,</span>
            <span class="s2">&quot;attempts&quot;</span><span class="p">:</span> <span class="n">max_attempts</span><span class="p">,</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;max_attempts_reached&quot;</span><span class="p">,</span>
            <span class="s2">&quot;final_count&quot;</span><span class="p">:</span> <span class="n">actual_count</span>
        <span class="p">}</span>


<span class="c1"># Usage</span>
<span class="n">generator</span> <span class="o">=</span> <span class="n">FoodImageGenerator</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">generator</span><span class="o">.</span><span class="n">generate_with_count</span><span class="p">(</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Five bananas on a wooden table&quot;</span><span class="p">,</span>
    <span class="n">target_count</span><span class="o">=</span><span class="mi">5</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;success&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ“ Successfully generated image with 5 bananas in </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;attempts&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> attempts&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âœ— Could not generate exact count after </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;attempts&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> attempts&quot;</span><span class="p">)</span>
</code></pre></div>

<h2 id="custom-agents">ğŸ› ï¸ Custom Agents</h2>
<h3 id="when-to-use_3">When to Use</h3>
<p>Tasks requiring specialized logic beyond standard patterns:<br />
- Complex state machines<br />
- Domain-specific workflows<br />
- Custom optimization algorithms<br />
- Unique business logic</p>
<h3 id="implementation_3">Implementation</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">adk</span> <span class="kn">import</span> <span class="n">BaseAgent</span>

<span class="k">class</span> <span class="nc">CustomWorkflowAgent</span><span class="p">(</span><span class="n">BaseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom agent with specialized Python logic</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tools</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Custom processing logic</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Your custom Python logic here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;current_input&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_data</span>

        <span class="c1"># Implement custom decision tree</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_branch_a</span><span class="p">(</span><span class="n">input_data</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_branch_a</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_branch_b</span><span class="p">(</span><span class="n">input_data</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_branch_b</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_default</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>

        <span class="c1"># Update history</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="n">input_data</span><span class="p">,</span>
            <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span>
            <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="p">})</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">should_branch_a</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom condition logic&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;high&#39;</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;complexity&#39;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">should_branch_b</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom condition logic&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;emergency&#39;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">execute_branch_a</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom execution logic&quot;&quot;&quot;</span>
        <span class="c1"># Your implementation</span>
        <span class="k">pass</span>


<span class="c1"># Usage</span>
<span class="n">custom_agent</span> <span class="o">=</span> <span class="n">CustomWorkflowAgent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;SpecializedProcessor&quot;</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">tool1</span><span class="p">,</span> <span class="n">tool2</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">custom_agent</span><span class="o">.</span><span class="n">process</span><span class="p">({</span><span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;complexity&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
</code></pre></div>

<h3 id="real-world-example-adaptive-customer-support-router">Real-World Example: Adaptive Customer Support Router</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">AdaptiveCustomerSupport</span><span class="p">(</span><span class="n">BaseAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom agent that routes tickets based on complex criteria</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;SupportRouter&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ticket_history</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agent_workloads</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">escalation_threshold</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">route_ticket</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ticket</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Custom routing logic considering multiple factors</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">customer_id</span> <span class="o">=</span> <span class="n">ticket</span><span class="p">[</span><span class="s1">&#39;customer_id&#39;</span><span class="p">]</span>

        <span class="c1"># Check customer history</span>
        <span class="n">history</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ticket_history</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">customer_id</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># Custom escalation logic</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">history</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">escalation_threshold</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">escalate_to_senior</span><span class="p">(</span><span class="n">ticket</span><span class="p">,</span> <span class="n">history</span><span class="p">)</span>

        <span class="c1"># Analyze ticket sentiment</span>
        <span class="n">sentiment</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_sentiment</span><span class="p">(</span><span class="n">ticket</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">])</span>

        <span class="c1"># Analyze technical complexity</span>
        <span class="n">complexity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">assess_complexity</span><span class="p">(</span><span class="n">ticket</span><span class="p">)</span>

        <span class="c1"># Custom agent selection algorithm</span>
        <span class="k">if</span> <span class="n">sentiment</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">0.5</span> <span class="ow">and</span> <span class="n">sentiment</span><span class="p">[</span><span class="s1">&#39;urgency&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">:</span>
            <span class="c1"># Frustrated customer - route to empathy specialist</span>
            <span class="n">agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_available_agent</span><span class="p">(</span><span class="n">skill</span><span class="o">=</span><span class="s1">&#39;empathy&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">complexity</span><span class="p">[</span><span class="s1">&#39;technical_level&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">:</span>
            <span class="c1"># Technical issue - route to technical specialist</span>
            <span class="n">agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_available_agent</span><span class="p">(</span><span class="n">skill</span><span class="o">=</span><span class="s1">&#39;technical&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Standard routing - balance workload</span>
            <span class="n">agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_least_busy_agent</span><span class="p">()</span>

        <span class="c1"># Update state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ticket_history</span><span class="p">[</span><span class="n">customer_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">history</span> <span class="o">+</span> <span class="p">[</span><span class="n">ticket</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agent_workloads</span><span class="p">[</span><span class="n">agent</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;assigned_to&quot;</span><span class="p">:</span> <span class="n">agent</span><span class="p">,</span>
            <span class="s2">&quot;routing_reason&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">explain_routing</span><span class="p">(</span><span class="n">sentiment</span><span class="p">,</span> <span class="n">complexity</span><span class="p">),</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_priority</span><span class="p">(</span><span class="n">sentiment</span><span class="p">,</span> <span class="n">complexity</span><span class="p">,</span> <span class="n">history</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div>

<h2 id="agent-type-selection-guide">ğŸ¯ Agent Type Selection Guide</h2>
<h3 id="decision-tree">Decision Tree</h3>
<div class="codehilite"><pre><span></span><code><span class="n">Question</span><span class="o">:</span><span class="w"> </span><span class="n">Is</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">linear</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">sequential</span><span class="o">?</span>
<span class="w">  </span><span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Yes</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">Sequential</span><span class="w"> </span><span class="n">Agent</span>
<span class="w">  </span><span class="err">â””â”€</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Question</span><span class="o">:</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="n">subtasks</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">independently</span><span class="o">?</span>
<span class="w">           </span><span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Yes</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">Parallel</span><span class="w"> </span><span class="n">Agent</span>
<span class="w">           </span><span class="err">â””â”€</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Question</span><span class="o">:</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">iterative</span><span class="w"> </span><span class="n">improvement</span><span class="o">?</span>
<span class="w">                    </span><span class="err">â”œâ”€</span><span class="w"> </span><span class="n">Yes</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">Loop</span><span class="w"> </span><span class="n">Agent</span>
<span class="w">                    </span><span class="err">â””â”€</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="n">Agent</span>
</code></pre></div>

<h3 id="comparison-table">Comparison Table</h3>
<table>
<thead>
<tr>
<th>Agent Type</th>
<th>Best For</th>
<th>Complexity</th>
<th>Flexibility</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sequential</td>
<td>Pipelines, workflows</td>
<td>Low</td>
<td>Low</td>
</tr>
<tr>
<td>Parallel</td>
<td>Independent tasks</td>
<td>Medium</td>
<td>Medium</td>
</tr>
<tr>
<td>Loop</td>
<td>Refinement, optimization</td>
<td>Medium</td>
<td>Medium</td>
</tr>
<tr>
<td>Custom</td>
<td>Specialized logic</td>
<td>High</td>
<td>High</td>
</tr>
</tbody>
</table>
<h2 id="advanced-hybrid-architectures">ğŸŒ³ Advanced: Hybrid Architectures</h2>
<h3 id="combining-agent-types">Combining Agent Types</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">HybridAgent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Combine multiple agent types for complex workflows</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Sequential pre-processing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preprocessor</span> <span class="o">=</span> <span class="n">SequentialAgent</span><span class="p">([</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Validator&quot;</span><span class="p">),</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Normalizer&quot;</span><span class="p">)</span>
        <span class="p">])</span>

        <span class="c1"># Parallel processing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processors</span> <span class="o">=</span> <span class="n">ParallelAgent</span><span class="p">([</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Processor1&quot;</span><span class="p">),</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Processor2&quot;</span><span class="p">),</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Processor3&quot;</span><span class="p">)</span>
        <span class="p">])</span>

        <span class="c1"># Loop for refinement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refiner</span> <span class="o">=</span> <span class="n">LoopAgent</span><span class="p">(</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Refiner&quot;</span><span class="p">),</span>
            <span class="n">max_iterations</span><span class="o">=</span><span class="mi">3</span>
        <span class="p">)</span>

        <span class="c1"># Sequential post-processing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">postprocessor</span> <span class="o">=</span> <span class="n">SequentialAgent</span><span class="p">([</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Aggregator&quot;</span><span class="p">),</span>
            <span class="n">Agent</span><span class="p">(</span><span class="s2">&quot;Formatter&quot;</span><span class="p">)</span>
        <span class="p">])</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="c1"># Sequential pre-processing</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">preprocessor</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Parallel processing</span>
        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">processors</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Loop refinement</span>
        <span class="n">refined</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">refiner</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

        <span class="c1"># Sequential post-processing</span>
        <span class="n">final</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">postprocessor</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">refined</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">final</span>
</code></pre></div>

<h2 id="key-takeaways">ğŸ¯ Key Takeaways</h2>
<ul>
<li><strong>Sequential</strong>: For ordered, dependent steps</li>
<li><strong>Parallel</strong>: For independent simultaneous tasks</li>
<li><strong>Loop</strong>: For iterative improvement</li>
<li>
<p><strong>Custom</strong>: For specialized logic</p>
</li>
<li>
<p><strong>Choose based on task structure</strong>, not personal preference</p>
</li>
<li><strong>Combine types</strong> for complex workflows</li>
<li><strong>Start simple</strong>, add complexity as needed</li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<p>Continue to <a href="./03-agent-models.md">Agent Models &amp; Contracts</a> to learn how to properly define agent APIs and interfaces.</p>
<hr />
<p>ğŸ’¡ <strong>Remember</strong>: The best agent type is the one that naturally mirrors your problem structure.</p>
                </div>
                
                <footer class="book-footer">
                    <div class="book-footer-content">
                        <p>Built with BookGen - A modern GitBook alternative</p>
                        <p>Generated on 2025-11-15 19:18:13</p>
                    </div>
                </footer>
            </main>
            
            
        </div>
    </div>
    
    <script src="/assets/script.js"></script>
</body>
</html>