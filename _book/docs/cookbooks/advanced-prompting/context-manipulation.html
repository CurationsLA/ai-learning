<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Open-source frameworks, guides, and resources for AI development, collaboration, and creativity">
    <meta name="author" content="VibeHub">
    <title>Context Manipulation - VibeHub - Human √ó AI Creative Agency</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/highlight.css">
</head>
<body>
    <div class="book-container">
        <div class="book-header">
            <div class="book-header-content">
                <h1 class="book-title">VibeHub - Human √ó AI Creative Agency</h1>
                <div class="book-header-controls">
                    <input type="search" class="search-input" placeholder="Search..." id="search-input">
                    <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
                        <span class="theme-icon">üåì</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="book-body">
            <nav class="book-sidebar">
<div class="book-sidebar-content">
<div class="sidebar-section">
<h3 class="sidebar-section-title">üè† Welcome to CURATIONS</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/readme.html">Start Here</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curations.html">About CURATIONS</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curationsla.html">About CurationsLA</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üåü Core Initiatives</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/the-curators.html">The Curators (AI Personas)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/youth-curator-movement.html">Youth Curator Movement</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üé® How We Build</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/design-systems.html">Design Systems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/technical-architecture.html">Technical Architecture</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üìö The AI √ó Human Cookbook</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/README.html">About the Cookbook</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üå± Foundations: AI Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/01-interoperability-intro.html">Introduction to Interoperability</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/02-model-garden.html">Model Garden & Foundation Models</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/03-memory-management.html">Memory Management</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üîç RAG & Knowledge Systems</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/01-rag-fundamentals.html">RAG Fundamentals</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/02-agentic-rag.html">Agentic RAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/03-graph-rag.html">GraphRAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/04-grounding.html">Grounding Techniques</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ü§ñ Agent Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/01-adk-overview.html">Agent Development Kits (ADK)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/02-agent-types.html">Agent Types</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/03-agent-models.html">Agent Models & Contracts</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/04-defining-llm-agents.html">Defining LLM Agents</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üõ†Ô∏è Tools & Integration</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/01-mcp.html">Model Context Protocol (MCP)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/02-a2a.html">Agent2Agent Protocol (A2A)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/03-tool-ecosystems.html">Tool Ecosystems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/04-agent-engines.html">AI Agent Engines</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üß† Advanced Prompting</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/README.html">Overview: Advanced Prompting</a>
</li>
<li class="sidebar-item active">
  <a href="/docs/cookbooks/advanced-prompting/context-manipulation.html">Context Manipulation</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/emoji-protocol.html">Emoji Protocol</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/meta-prompting.html">Meta-Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/quantum-prompting.html">Quantum Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/temporal-debugging.html">Temporal Debugging</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üé® Business: Branding & Growth</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/README.html">Overview: AI-Powered Business</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/quantum-brand-engine.html">Quantum Brand Engine</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/brand-archaeology.html">Brand Archaeology</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/ai-discovery-singularity.html">AI Discovery Singularity (AAO)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/schema-mastery.html">Schema.org Mastery</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/creator-engine.html">Creator Singularity Engine</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">üöÄ Going Legendary</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/full-stack-ai.html">Full-Stack AI Applications</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/production-deployment.html">Production Deployment</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/scaling.html">Scaling Strategies</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/the-future.html">The Future We're Building</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ü§ù Get Involved</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/get-involved.html">How to Contribute, Learn & Collaborate</a>
</li>
</ul>
</div>
</div>
</nav>

            
            <main class="book-main">
                <div class="book-content">
                    <h1 id="context-manipulation">üóÇÔ∏è Context Manipulation</h1>
<p><strong>Achieving infinite memory in finite context windows</strong></p>
<hr />
<h2 id="the-problem">The Problem</h2>
<p>AI has context limits:<br />
- Claude: ~200K tokens<br />
- ChatGPT: ~128K tokens<br />
- Others: even less</p>
<p>Large projects blow through this instantly. A medium codebase? 500K+ tokens easy.</p>
<p><strong>You hit the wall. AI forgets. Progress stops.</strong></p>
<h2 id="the-solution">The Solution</h2>
<p>Context manipulation: Achieving 95-97% effective compression without losing critical information.</p>
<p>Not by upgrading models. By <strong>working smarter with context.</strong></p>
<hr />
<h2 id="core-techniques">Core Techniques</h2>
<h3 id="1-hierarchical-context-compression">1. Hierarchical Context Compression</h3>
<p><strong>Layer your context like an onion:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="n">LAYER_0</span><span class="o">:</span><span class="w"> </span><span class="n">Meta</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="o">(</span><span class="n">what</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">doing</span><span class="w"> </span><span class="n">overall</span><span class="o">?)</span>
<span class="n">LAYER_1</span><span class="o">:</span><span class="w"> </span><span class="n">Structure</span><span class="w"> </span><span class="o">(</span><span class="n">how</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">organized</span><span class="o">?)</span>
<span class="n">LAYER_2</span><span class="o">:</span><span class="w"> </span><span class="n">Active</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="o">(</span><span class="n">what</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">doing</span><span class="w"> </span><span class="n">RIGHT</span><span class="w"> </span><span class="n">NOW</span><span class="o">?)</span>
<span class="n">LAYER_3</span><span class="o">:</span><span class="w"> </span><span class="n">Details</span><span class="w"> </span><span class="o">(</span><span class="n">specifics</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">task</span><span class="o">)</span>
</code></pre></div>

<p><strong>Example:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">@</span><span class="n">ai</span><span class="w"> </span><span class="n">CONTEXT_LAYERS</span><span class="o">:</span>

<span class="nl">META</span><span class="p">:</span><span class="w"> </span><span class="n">Refactoring</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">system</span>
<span class="nl">STRUCTURE</span><span class="p">:</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="w"> </span><span class="n">files</span><span class="p">),</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="n">files</span><span class="p">)</span>
<span class="nl">ACTIVE</span><span class="p">:</span><span class="w"> </span><span class="n">Working</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">login</span><span class="p">.</span><span class="n">ts</span>
<span class="nl">DETAIL</span><span class="p">:</span><span class="w"> </span><span class="n">Lines</span><span class="w"> </span><span class="mi">42-67</span><span class="p">,</span><span class="w"> </span><span class="n">fixing</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="n">expiry</span><span class="w"> </span><span class="n">check</span>

<span class="n">Current</span><span class="w"> </span><span class="n">issue</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="n">specific</span><span class="w"> </span><span class="n">problem</span><span class="p">]</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- Traditional: Paste entire 500-line file (3,000+ tokens)<br />
- Hierarchical: Reference + specific section (150 tokens)<br />
- <strong>Compression: 95%</strong></p>
<h3 id="2-context-anchoring">2. Context Anchoring</h3>
<p><strong>Define once, reference infinitely.</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">@ai</span><span class="w"> </span><span class="nl">ANCHOR</span><span class="p">:</span><span class="n">AUTH_SYSTEM</span>

<span class="k">System</span><span class="err">:</span><span class="w"> </span><span class="n">JWT</span><span class="o">-</span><span class="n">based</span><span class="w"> </span><span class="n">authentication</span>
<span class="nl">Stack</span><span class="p">:</span><span class="w"> </span><span class="n">Node</span><span class="p">.</span><span class="n">js</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Express</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PostgreSQL</span>
<span class="nl">Files</span><span class="p">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">login</span><span class="p">.</span><span class="n">ts</span><span class="w"> </span><span class="p">(</span><span class="n">main</span><span class="w"> </span><span class="n">logic</span><span class="p">)</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">tokens</span><span class="p">.</span><span class="n">ts</span><span class="w"> </span><span class="p">(</span><span class="n">JWT</span><span class="w"> </span><span class="n">generation</span><span class="p">)</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">middleware</span><span class="p">.</span><span class="n">ts</span><span class="w"> </span><span class="p">(</span><span class="n">route</span><span class="w"> </span><span class="n">protection</span><span class="p">)</span>
<span class="nl">Pattern</span><span class="p">:</span><span class="w"> </span><span class="ow">All</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="n">AuthError</span><span class="w"> </span><span class="k">class</span>
<span class="nl">Tests</span><span class="p">:</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">auth</span><span class="cm">/*.test.ts</span>

<span class="cm">// Now reference it:</span>
<span class="cm">@ai Using ANCHOR:AUTH_SYSTEM</span>
<span class="cm">Fix the token refresh race condition</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- Define once: 200 tokens<br />
- Reference forever: 10 tokens each time<br />
- <strong>Savings: Massive over repeated conversations</strong></p>
<h3 id="3-diff-based-context">3. Diff-Based Context</h3>
<p><strong>Send changes, not full files.</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">@ai</span><span class="w"> </span><span class="k">FILE</span><span class="err">:</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">login</span><span class="p">.</span><span class="n">ts</span>

<span class="nl">CHANGED_LINES</span><span class="p">:</span>
<span class="mi">42</span><span class="err">:</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">expires</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nc">Date</span><span class="p">.</span><span class="n">now</span><span class="p">())</span><span class="w"> </span><span class="err">{</span>
<span class="mi">42</span><span class="err">:</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">expires</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nc">Date</span><span class="p">.</span><span class="n">now</span><span class="p">())</span><span class="w"> </span><span class="err">{</span>
<span class="mi">58</span><span class="err">:</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">Add</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">check</span>
<span class="mi">59</span><span class="err">:</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="err">!</span><span class="k">user</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>

<span class="nl">Context</span><span class="p">:</span><span class="w"> </span><span class="n">Fixing</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="n">expiry</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- Full file: 3,000 tokens<br />
- Diff only: 120 tokens<br />
- <strong>Compression: 96%</strong></p>
<h3 id="4-pointer-based-context">4. Pointer-Based Context</h3>
<p><strong>Use file paths instead of content.</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">@ai</span><span class="w"> </span><span class="nl">ISSUE</span><span class="p">:</span><span class="w"> </span><span class="n">Authentication</span><span class="w"> </span><span class="n">failing</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">production</span>

<span class="n">Relevant</span><span class="w"> </span><span class="nl">files</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">login</span><span class="p">.</span><span class="nl">ts</span><span class="p">:</span><span class="mi">42</span><span class="o">-</span><span class="mi">67</span><span class="w"> </span><span class="p">(</span><span class="n">token</span><span class="w"> </span><span class="n">validation</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">tokens</span><span class="p">.</span><span class="nl">ts</span><span class="p">:</span><span class="mi">23</span><span class="w"> </span><span class="p">(</span><span class="n">token</span><span class="w"> </span><span class="n">generation</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">config</span><span class="o">/</span><span class="n">jwt</span><span class="p">.</span><span class="nl">ts</span><span class="p">:</span><span class="mi">8</span><span class="w"> </span><span class="p">(</span><span class="n">secret</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">config</span><span class="p">)</span>

<span class="n">Error</span><span class="w"> </span><span class="n">occurs</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">login</span><span class="p">.</span><span class="nl">ts</span><span class="p">:</span><span class="mi">58</span>
<span class="n">Related</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="n">abc123</span>

<span class="n">Investigate</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">fix</span><span class="p">.</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- Pasting all files: 5,000+ tokens<br />
- Pointers: 100 tokens<br />
- <strong>Compression: 98%</strong></p>
<p>AI can ask for specific files if needed. Start minimal.</p>
<h3 id="5-session-state-management">5. Session State Management</h3>
<p><strong>Explicitly track conversation state.</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">@</span><span class="nx">ai</span><span class="w"> </span><span class="nx">SESSION_STATE</span><span class="p">:</span>

<span class="nx">TASK</span><span class="p">:</span><span class="w"> </span><span class="nx">Refactor</span><span class="w"> </span><span class="nx">authentication</span>
<span class="nx">PROGRESS</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="o">%</span><span class="w"> </span><span class="nx">complete</span>
<span class="nx">COMPLETED</span><span class="p">:</span>
<span class="w">  </span><span class="err">‚úÖ</span><span class="w"> </span><span class="nx">Login</span><span class="w"> </span><span class="nx">endpoint</span><span class="w"> </span><span class="nx">refactored</span>
<span class="w">  </span><span class="err">‚úÖ</span><span class="w"> </span><span class="nx">Token</span><span class="w"> </span><span class="nx">generation</span><span class="w"> </span><span class="nx">updated</span>
<span class="w">  </span><span class="err">‚úÖ</span><span class="w"> </span><span class="nx">Tests</span><span class="w"> </span><span class="nx">passing</span>
<span class="nx">IN_PROGRESS</span><span class="p">:</span>
<span class="w">  </span><span class="err">üîÑ</span><span class="w"> </span><span class="nx">Refresh</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="nx">logic</span>
<span class="nx">BLOCKED</span><span class="p">:</span>
<span class="w">  </span><span class="err">‚ö†Ô∏è</span><span class="w"> </span><span class="nx">Waiting</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">database</span><span class="w"> </span><span class="nx">migration</span>
<span class="nx">NEXT</span><span class="p">:</span>
<span class="w">  </span><span class="err">üìã</span><span class="w"> </span><span class="nx">Update</span><span class="w"> </span><span class="nx">middleware</span>
<span class="w">  </span><span class="err">üìã</span><span class="w"> </span><span class="nx">Add</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="nx">limiting</span>

<span class="nx">Current</span><span class="w"> </span><span class="nx">focus</span><span class="p">:</span><span class="w"> </span><span class="nx">Refresh</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="nx">implementation</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- AI knows exactly where we are<br />
- No need to repeat completed work<br />
- Clear what's next</p>
<h3 id="6-semantic-compression-codes">6. Semantic Compression Codes</h3>
<p><strong>Create shorthand for complex patterns.</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">@</span><span class="nx">ai</span><span class="w"> </span><span class="nx">CODES</span><span class="p">:</span>

<span class="nx">REFACTOR_PATTERN_1</span><span class="p">:</span><span class="w"> </span><span class="nx">Extract</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">function</span><span class="p">,</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">types</span><span class="p">,</span><span class="w"> </span><span class="nx">write</span><span class="w"> </span><span class="nx">test</span>
<span class="nx">ERROR_PATTERN</span><span class="p">:</span><span class="w"> </span><span class="nx">Try</span><span class="o">-</span><span class="nx">catch</span><span class="p">,</span><span class="w"> </span><span class="nx">log</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">service</span><span class="p">,</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">Result</span><span class="w"> </span><span class="k">type</span>
<span class="nx">API_PATTERN</span><span class="p">:</span><span class="w"> </span><span class="nx">Validate</span><span class="w"> </span><span class="nx">input</span><span class="p">,</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="nx">auth</span><span class="p">,</span><span class="w"> </span><span class="nx">call</span><span class="w"> </span><span class="nx">service</span><span class="p">,</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">JSON</span>

<span class="c1">// Usage:</span>
<span class="err">@</span><span class="nx">ai</span><span class="w"> </span><span class="nx">Apply</span><span class="w"> </span><span class="nx">REFACTOR_PATTERN_1</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">calculateTotal</span><span class="p">()</span><span class="w"> </span><span class="nx">function</span>
<span class="err">@</span><span class="nx">ai</span><span class="w"> </span><span class="nx">Add</span><span class="w"> </span><span class="nx">ERROR_PATTERN</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">database</span><span class="w"> </span><span class="nx">queries</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- Define patterns once<br />
- Reference in 2-3 tokens<br />
- AI knows exactly what you mean</p>
<h3 id="7-conditional-context-loading">7. Conditional Context Loading</h3>
<p><strong>Load context only when needed.</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">@</span><span class="n">ai</span><span class="w"> </span><span class="n">I</span><span class="s1">&#39;m working on authentication</span>

<span class="o">//</span><span class="w"> </span><span class="n">AI</span><span class="w"> </span><span class="n">asks</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Do you need context for:&quot;</span>
<span class="o">//</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">JWT</span><span class="w"> </span><span class="n">implementation</span><span class="err">?</span>
<span class="o">//</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Database</span><span class="w"> </span><span class="n">schema</span><span class="err">?</span>
<span class="o">//</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="n">endpoints</span><span class="err">?</span>
<span class="o">//</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="n">patterns</span><span class="err">?</span>

<span class="o">//</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">answer</span><span class="p">:</span>
<span class="n">Just</span><span class="w"> </span><span class="n">JWT</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">tests</span>

<span class="o">//</span><span class="w"> </span><span class="n">AI</span><span class="w"> </span><span class="n">loads</span><span class="w"> </span><span class="n">ONLY</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">contexts</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- Don't load what you don't need<br />
- AI asks for more if required<br />
- Stay under limits</p>
<h3 id="8-context-stack-pushpop">8. Context Stack (Push/Pop)</h3>
<p><strong>Manage context like a stack.</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">@ai</span><span class="w"> </span><span class="nl">PUSH_CONTEXT</span><span class="p">:</span><span class="w"> </span><span class="n">Refactoring</span><span class="w"> </span><span class="n">login</span><span class="p">.</span><span class="n">ts</span>

<span class="o">[</span><span class="n">Work on login.ts</span><span class="o">]</span>

<span class="nv">@ai</span><span class="w"> </span><span class="n">POP_CONTEXT</span>
<span class="nv">@ai</span><span class="w"> </span><span class="nl">PUSH_CONTEXT</span><span class="p">:</span><span class="w"> </span><span class="n">Updating</span><span class="w"> </span><span class="n">tests</span>

<span class="o">[</span><span class="n">Work on tests</span><span class="o">]</span>

<span class="nv">@ai</span><span class="w"> </span><span class="n">POP_CONTEXT</span>
<span class="n">Back</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">overall</span><span class="w"> </span><span class="n">refactoring</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- Deep work without losing place<br />
- Return to previous state cleanly<br />
- Organized context management</p>
<h3 id="9-external-memory-files">9. External Memory Files</h3>
<p><strong>Store context outside conversation.</strong></p>
<p>Create a <code>context.md</code> file:</p>
<div class="codehilite"><pre><span></span><code><span class="gh"># Project Context</span>

<span class="gu">## Architecture</span>
<span class="k">-</span><span class="w"> </span>Microservices: auth, users, billing
<span class="k">-</span><span class="w"> </span>Tech: Node.js + PostgreSQL + Redis
<span class="k">-</span><span class="w"> </span>Deploy: Kubernetes on AWS

<span class="gu">## Current Work</span>
Working on: Authentication refactor
Branch: feature/auth-v2
Status: 60% complete

<span class="gu">## Key Files</span>
<span class="k">-</span><span class="w"> </span>src/auth/login.ts - Main login logic
<span class="k">-</span><span class="w"> </span>src/auth/tokens.ts - JWT handling
<span class="k">-</span><span class="w"> </span>tests/auth/ - Test suite
</code></pre></div>

<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">@ai</span><span class="w"> </span><span class="k">Read</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">md</span><span class="p">,</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="n">fix</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="n">refresh</span><span class="w"> </span><span class="n">bug</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- Context persists across sessions<br />
- Update once, use everywhere<br />
- AI reads from file, not conversation</p>
<h3 id="10-lossy-compression">10. Lossy Compression</h3>
<p><strong>Keep essence, regenerate details.</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nv">@ai</span><span class="w"> </span><span class="nl">COMPRESSED_CONTEXT</span><span class="p">:</span>

<span class="n">Auth</span><span class="w"> </span><span class="k">system</span><span class="w"> </span><span class="n">broken</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">production</span>
<span class="o">-</span><span class="w"> </span><span class="nl">Error</span><span class="p">:</span><span class="w"> </span><span class="ss">&quot;Token invalid&quot;</span>
<span class="o">-</span><span class="w"> </span><span class="nl">Happens</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="o">%</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">logins</span>
<span class="o">-</span><span class="w"> </span><span class="nl">Started</span><span class="p">:</span><span class="w"> </span><span class="k">After</span><span class="w"> </span><span class="n">deploy</span><span class="w"> </span><span class="n">xyz</span>
<span class="o">-</span><span class="w"> </span><span class="nl">Suspect</span><span class="p">:</span><span class="w"> </span><span class="n">Token</span><span class="w"> </span><span class="n">expiry</span><span class="w"> </span><span class="n">logic</span>

<span class="n">Fix</span><span class="w"> </span><span class="n">it</span><span class="p">.</span>

<span class="o">//</span><span class="w"> </span><span class="n">AI</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">ask</span><span class="w"> </span><span class="k">for</span><span class="err">:</span>
<span class="o">//</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">Full</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">logs</span><span class="vm">?</span>
<span class="o">//</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Relevant</span><span class="w"> </span><span class="n">code</span><span class="vm">?</span>
<span class="o">//</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Recent</span><span class="w"> </span><span class="n">commits</span><span class="vm">?</span>

<span class="o">//</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="k">only</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">AI</span><span class="w"> </span><span class="n">requests</span>
</code></pre></div>

<p><strong>Result:</strong><br />
- Start with minimum<br />
- Add details on demand<br />
- Never over-context</p>
<hr />
<h2 id="real-world-example">Real-World Example</h2>
<p><strong>Scenario:</strong> Debugging complex issue in 100K+ line codebase</p>
<h3 id="traditional-approach">Traditional Approach:</h3>
<div class="codehilite"><pre><span></span><code><span class="nv">@ai</span><span class="w"> </span><span class="n">Here</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">entire</span><span class="w"> </span><span class="n">codebase</span><span class="w"> </span><span class="o">[</span><span class="n">paste</span><span class="o">]</span>
<span class="nl">ERROR</span><span class="p">:</span><span class="w"> </span><span class="n">Context</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="n">exceeded</span>
</code></pre></div>

<h3 id="context-manipulation-approach">Context Manipulation Approach:</h3>
<div class="codehilite"><pre><span></span><code><span class="err">@</span><span class="n">ai</span><span class="w"> </span><span class="n">ANCHOR</span><span class="p">:</span><span class="n">PROJECT_CONTEXT</span>
<span class="o">-</span><span class="w"> </span><span class="n">Codebase</span><span class="p">:</span><span class="w"> </span><span class="n">E</span><span class="o">-</span><span class="n">commerce</span><span class="w"> </span><span class="n">platform</span>
<span class="o">-</span><span class="w"> </span><span class="n">Stack</span><span class="p">:</span><span class="w"> </span><span class="n">React</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Node</span><span class="o">.</span><span class="n">js</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">PostgreSQL</span>
<span class="o">-</span><span class="w"> </span><span class="n">Scale</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="n">K</span><span class="w"> </span><span class="n">LOC</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="o">+</span><span class="w"> </span><span class="n">files</span>
<span class="o">-</span><span class="w"> </span><span class="n">Issue</span><span class="p">:</span><span class="w"> </span><span class="n">Checkout</span><span class="w"> </span><span class="n">failing</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">5</span><span class="o">%</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">users</span>

<span class="n">ACTIVE_INVESTIGATION</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">File</span><span class="p">:</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">checkout</span><span class="o">/</span><span class="n">payment</span><span class="o">.</span><span class="n">ts</span><span class="p">:</span><span class="mi">145</span>
<span class="o">-</span><span class="w"> </span><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cannot read property &#39;id&#39; of undefined&quot;</span>
<span class="o">-</span><span class="w"> </span><span class="n">Started</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">days</span><span class="w"> </span><span class="n">ago</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">deploy</span>
<span class="o">-</span><span class="w"> </span><span class="n">Affected</span><span class="p">:</span><span class="w"> </span><span class="n">Users</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="n">cards</span>

<span class="n">RELEVANT_FILES</span><span class="w"> </span><span class="p">(</span><span class="n">pointer</span><span class="o">-</span><span class="n">based</span><span class="p">):</span>
<span class="o">-</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">checkout</span><span class="o">/</span><span class="n">payment</span><span class="o">.</span><span class="n">ts</span><span class="p">:</span><span class="mi">140</span><span class="o">-</span><span class="mi">160</span>
<span class="o">-</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">PaymentMethod</span><span class="o">.</span><span class="n">ts</span><span class="p">:</span><span class="mi">23</span><span class="o">-</span><span class="mi">45</span>
<span class="o">-</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">stripe</span><span class="o">.</span><span class="n">ts</span><span class="p">:</span><span class="mi">67</span>

<span class="n">HYPOTHESIS</span><span class="p">:</span>
<span class="n">Saved</span><span class="w"> </span><span class="n">cards</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="n">case</span>

<span class="n">DIFF</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">version</span><span class="p">:</span>
<span class="n">payment</span><span class="o">.</span><span class="n">ts</span><span class="p">:</span><span class="mi">145</span>
<span class="o">-</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">cardId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">card</span><span class="o">.</span><span class="n">id</span>
<span class="o">+</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">cardId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">card</span><span class="err">?</span><span class="o">.</span><span class="n">stripeId</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">card</span><span class="o">.</span><span class="n">id</span>

<span class="n">Help</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="n">debug</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">fix</span><span class="o">.</span>
</code></pre></div>

<p><strong>Token usage:</strong><br />
- Traditional: CRASH (over limit)<br />
- Optimized: ~300 tokens<br />
- <strong>Effective compression: 99%+</strong></p>
<hr />
<h2 id="the-workflow">The Workflow</h2>
<ol>
<li><strong>Define anchors</strong> for major systems/contexts</li>
<li><strong>Use pointers</strong> instead of pasting code</li>
<li><strong>Send diffs</strong> for changes</li>
<li><strong>Layer context</strong> (meta ‚Üí structure ‚Üí active ‚Üí detail)</li>
<li><strong>Track session state</strong> explicitly</li>
<li><strong>Load conditionally</strong> - only what's needed</li>
<li><strong>Store externally</strong> - <code>context.md</code> files</li>
<li><strong>Compress lossily</strong> - essence first, details on demand</li>
</ol>
<hr />
<h2 id="best-practices">Best Practices</h2>
<p>‚úÖ <strong>DO:</strong><br />
- Start with minimum context<br />
- Add detail only when AI asks<br />
- Use file:line references<br />
- Create anchors for recurring contexts<br />
- Update context.md files<br />
- Think in layers</p>
<p>‚ùå <strong>DON'T:</strong><br />
- Paste entire files unless required<br />
- Repeat context AI already has<br />
- Front-load every possible detail<br />
- Ignore context structure</p>
<hr />
<h2 id="measuring-success">Measuring Success</h2>
<p><strong>Before context manipulation:</strong><br />
- Hit limits constantly<br />
- Restart conversations frequently<br />
- Lose progress<br />
- Frustrated</p>
<p><strong>After context manipulation:</strong><br />
- Rarely hit limits<br />
- Conversations last indefinitely<br />
- Continuous progress<br />
- Productive</p>
<p><strong>Compression ratios:</strong><br />
- Good: 80-90%<br />
- Great: 90-95%<br />
- Legendary: 95-99%</p>
<hr />
<h2 id="tools-that-help">Tools That Help</h2>
<p><strong>Manual:</strong><br />
- <code>context.md</code> files in your project<br />
- Anchor definitions at conversation start<br />
- Explicit state tracking</p>
<p><strong>Future (coming soon):</strong><br />
- IDE extensions for auto-compression<br />
- Context managers<br />
- Automatic anchor generation</p>
<hr />
<h2 id="next-level">Next Level</h2>
<p>Combine with:<br />
- <a href="./emoji-protocol.md">Emoji Protocol</a> - Compress even further<br />
- <a href="./meta-prompting.md">Meta-Prompting</a> - Generate optimal context structures<br />
- <a href="./quantum-prompting.md">Quantum Prompting</a> - Context in superposition</p>
<hr />
<h2 id="practice-exercise">Practice Exercise</h2>
<p><strong>Try this:</strong></p>
<ol>
<li>Take a complex project you're working on</li>
<li>Create a <code>context.md</code> with project overview</li>
<li>Define 3 ANCHOR points for major systems</li>
<li>Next AI conversation: Use anchors + pointers only</li>
<li>Measure token savings</li>
</ol>
<p><strong>Goal:</strong> 90%+ compression on first try</p>
<hr />
<p><em>"The best context is the minimum context that gets maximum results."</em></p>
<p><strong>Master context manipulation. Work in codebases 10x larger than your context window.</strong> üóÇÔ∏è</p>
<hr />
<p><a href="./README.md">‚Üê Back to Advanced Prompting</a></p>
                </div>
                
                <footer class="book-footer">
                    <div class="book-footer-content">
                        <p>Built with BookGen - A modern GitBook alternative</p>
                        <p>Generated on 2025-11-15 19:18:13</p>
                    </div>
                </footer>
            </main>
            
            
        </div>
    </div>
    
    <script src="/assets/script.js"></script>
</body>
</html>