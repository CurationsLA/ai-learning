<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Open-source frameworks, guides, and resources for AI development, collaboration, and creativity">
    <meta name="author" content="VibeHub">
    <title>Model Context Protocol (MCP) - VibeHub - Human Ã— AI Creative Agency</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/highlight.css">
</head>
<body>
    <div class="book-container">
        <div class="book-header">
            <div class="book-header-content">
                <h1 class="book-title">VibeHub - Human Ã— AI Creative Agency</h1>
                <div class="book-header-controls">
                    <input type="search" class="search-input" placeholder="Search..." id="search-input">
                    <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
                        <span class="theme-icon">ğŸŒ“</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="book-body">
            <nav class="book-sidebar">
<div class="book-sidebar-content">
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ  Welcome to CURATIONS</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/readme.html">Start Here</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curations.html">About CURATIONS</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curationsla.html">About CurationsLA</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸŒŸ Core Initiatives</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/the-curators.html">The Curators (AI Personas)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/youth-curator-movement.html">Youth Curator Movement</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¨ How We Build</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/design-systems.html">Design Systems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/technical-architecture.html">Technical Architecture</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ“š The AI Ã— Human Cookbook</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/README.html">About the Cookbook</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸŒ± Foundations: AI Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/01-interoperability-intro.html">Introduction to Interoperability</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/02-model-garden.html">Model Garden & Foundation Models</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/03-memory-management.html">Memory Management</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ” RAG & Knowledge Systems</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/01-rag-fundamentals.html">RAG Fundamentals</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/02-agentic-rag.html">Agentic RAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/03-graph-rag.html">GraphRAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/04-grounding.html">Grounding Techniques</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¤– Agent Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/01-adk-overview.html">Agent Development Kits (ADK)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/02-agent-types.html">Agent Types</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/03-agent-models.html">Agent Models & Contracts</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/04-defining-llm-agents.html">Defining LLM Agents</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ› ï¸ Tools & Integration</h3>
<ul class="sidebar-list">
<li class="sidebar-item active">
  <a href="/docs/cookbooks/tools/01-mcp.html">Model Context Protocol (MCP)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/02-a2a.html">Agent2Agent Protocol (A2A)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/03-tool-ecosystems.html">Tool Ecosystems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/04-agent-engines.html">AI Agent Engines</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ§  Advanced Prompting</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/README.html">Overview: Advanced Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/context-manipulation.html">Context Manipulation</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/emoji-protocol.html">Emoji Protocol</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/meta-prompting.html">Meta-Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/quantum-prompting.html">Quantum Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/temporal-debugging.html">Temporal Debugging</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¨ Business: Branding & Growth</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/README.html">Overview: AI-Powered Business</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/quantum-brand-engine.html">Quantum Brand Engine</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/brand-archaeology.html">Brand Archaeology</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/ai-discovery-singularity.html">AI Discovery Singularity (AAO)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/schema-mastery.html">Schema.org Mastery</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/creator-engine.html">Creator Singularity Engine</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸš€ Going Legendary</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/full-stack-ai.html">Full-Stack AI Applications</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/production-deployment.html">Production Deployment</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/scaling.html">Scaling Strategies</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/the-future.html">The Future We're Building</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¤ Get Involved</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/get-involved.html">How to Contribute, Learn & Collaborate</a>
</li>
</ul>
</div>
</div>
</nav>

            
            <main class="book-main">
                <div class="book-content">
                    <h1 id="model-context-protocol-mcp-standardized-content-delivery">ğŸ”Œ Model Context Protocol (MCP): Standardized Content Delivery</h1>
<h2 id="seedling-concept">ğŸŒ± Seedling Concept</h2>
<p><strong>Label</strong>: Universal Language for AI Context</p>
<p>The <strong>Model Context Protocol (MCP)</strong> is an open protocol that standardizes how applications provide content to Large Language Models. Think of it as USB for AIâ€”a universal connector that works across different systems and models.</p>
<h2 id="what-is-mcp">What is MCP?</h2>
<h3 id="the-interoperability-problem">The Interoperability Problem</h3>
<div class="codehilite"><pre><span></span><code>Before MCP:                        With MCP:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ App A    â”‚â”€â”€customâ”€â”€â”            â”‚ App A    â”‚â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                      â–¼                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ App B    â”‚â”€â”€APIâ”€â”¤  LLM  â”‚       â”‚ App B    â”‚â”€â”€â”¼â”€â”€â”¤  MCP   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ Server â”‚
                      â–²                           â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚ App C    â”‚â”€â”€diffâ”€â”€â”˜             â”‚ App C    â”‚â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                                                          â–¼
Each app uses                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
different format                                     â”‚  LLM   â”‚
                                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                                     Standard
                                                     protocol
</code></pre></div>

<h3 id="core-benefits">Core Benefits</h3>
<ol>
<li><strong>Plug-and-Play</strong>: Connect any MCP server to any MCP client</li>
<li><strong>Reusability</strong>: Write once, use everywhere</li>
<li><strong>Standardization</strong>: Consistent format across platforms</li>
<li><strong>Discoverability</strong>: Servers advertise their capabilities</li>
<li><strong>Maintainability</strong>: Update servers independently</li>
</ol>
<h2 id="mcp-architecture">ğŸ’¡ MCP Architecture</h2>
<h3 id="components">Components</h3>
<div class="codehilite"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MCP Ecosystem                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MCP Client   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤  MCP Server  â”‚  â”‚
â”‚  â”‚ (LLM App)    â”‚  Protocolâ”‚  (Context)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                â”‚
â”‚  Examples:                 Examples:           â”‚
â”‚  - ChatGPT                 - File System      â”‚
â”‚  - Claude Desktop          - Database         â”‚
â”‚  - VS Code                 - API Wrapper      â”‚
â”‚  - Custom Apps             - Web Search       â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="request-response-flow">Request-Response Flow</h3>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">Client</span><span class="w"> </span><span class="n">discovers</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">capabilities</span>
<span class="w">   </span><span class="n">Client</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Server</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;What can you do?&quot;</span>
<span class="w">   </span><span class="n">Server</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;I provide file system access&quot;</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">Client</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="kr">cont</span><span class="n">ext</span>
<span class="w">   </span><span class="n">Client</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Server</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Get files in /docs&quot;</span>
<span class="w">   </span><span class="n">Server</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Client</span><span class="p">:</span><span class="w"> </span><span class="err">[</span><span class="n">file1</span><span class="mf">.</span><span class="n">md</span><span class="p">,</span><span class="w"> </span><span class="n">file2</span><span class="mf">.</span><span class="n">md</span><span class="p">,</span><span class="w"> </span><span class="mf">...</span><span class="err">]</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">Client</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="kr">cont</span><span class="n">ext</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">LLM</span>
<span class="w">   </span><span class="n">Client</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">LLM</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;User query + file contents&quot;</span>
<span class="w">   </span><span class="n">LLM</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Client</span><span class="p">:</span><span class="w"> </span><span class="n">Response</span>

<span class="mf">4.</span><span class="w"> </span><span class="n">Client</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">actions</span>
<span class="w">   </span><span class="n">Client</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Server</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Write file: output.txt&quot;</span>
<span class="w">   </span><span class="n">Server</span><span class="w"> </span><span class="err">â†’</span><span class="w"> </span><span class="n">Client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Success: file created&quot;</span>
</code></pre></div>

<h2 id="building-an-mcp-server">ğŸ”¬ Building an MCP Server</h2>
<h3 id="basic-mcp-server">Basic MCP Server</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="k">class</span> <span class="nc">MCPServer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Basic MCP server implementation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tools</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">register_capability</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capability</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="nb">callable</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register a capability the server provides</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">[</span><span class="n">capability</span><span class="p">]</span> <span class="o">=</span> <span class="n">handler</span>

    <span class="k">def</span> <span class="nf">register_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="nb">callable</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register a tool that clients can invoke</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
            <span class="s1">&#39;handler&#39;</span><span class="p">:</span> <span class="n">handler</span>
        <span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle incoming MCP request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_type</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request_type</span> <span class="o">==</span> <span class="s1">&#39;list_capabilities&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_capabilities</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">request_type</span> <span class="o">==</span> <span class="s1">&#39;list_tools&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_tools</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">request_type</span> <span class="o">==</span> <span class="s1">&#39;invoke_tool&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">invoke_tool</span><span class="p">(</span>
                <span class="n">request</span><span class="p">[</span><span class="s1">&#39;tool_name&#39;</span><span class="p">],</span>
                <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">request_type</span> <span class="o">==</span> <span class="s1">&#39;get_context&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">request</span><span class="p">[</span><span class="s1">&#39;query&#39;</span><span class="p">])</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Unknown request type: </span><span class="si">{</span><span class="n">request_type</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="p">}</span>

    <span class="k">def</span> <span class="nf">list_capabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Advertise server capabilities</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
            <span class="s1">&#39;capabilities&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
            <span class="s1">&#39;protocol_version&#39;</span><span class="p">:</span> <span class="s1">&#39;1.0&#39;</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">list_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List available tools</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;tools&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">]</span>
        <span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">invoke_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute a tool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tool_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Unknown tool: </span><span class="si">{</span><span class="n">tool_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">}</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="p">[</span><span class="n">tool_name</span><span class="p">][</span><span class="s1">&#39;handler&#39;</span><span class="p">](</span><span class="n">parameters</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
                <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">result</span>
            <span class="p">}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="p">}</span>


<span class="c1"># Example: File System MCP Server</span>
<span class="k">class</span> <span class="nc">FileSystemMCPServer</span><span class="p">(</span><span class="n">MCPServer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MCP server for file system operations</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;FileSystemServer&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Provides access to file system operations&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_path</span> <span class="o">=</span> <span class="n">base_path</span>

        <span class="c1"># Register capabilities</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_capability</span><span class="p">(</span><span class="s1">&#39;read_files&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_capability</span><span class="p">(</span><span class="s1">&#39;list_directory&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_directory</span><span class="p">)</span>

        <span class="c1"># Register tools</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_tool</span><span class="p">(</span>
            <span class="s1">&#39;read_file&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Read contents of a file&#39;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">read_file_tool</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_tool</span><span class="p">(</span>
            <span class="s1">&#39;list_files&#39;</span><span class="p">,</span>
            <span class="s1">&#39;List files in a directory&#39;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_files_tool</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">read_file_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read file contents</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span>
        <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_path</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">full_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">list_files_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List directory contents</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dir_path</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_path</span><span class="p">,</span> <span class="n">dir_path</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">full_path</span><span class="p">)</span>


<span class="c1"># Usage</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">FileSystemMCPServer</span><span class="p">(</span><span class="n">base_path</span><span class="o">=</span><span class="s2">&quot;/documents&quot;</span><span class="p">)</span>

<span class="c1"># Client request</span>
<span class="n">request</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;invoke_tool&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tool_name&#39;</span><span class="p">:</span> <span class="s1">&#39;read_file&#39;</span><span class="p">,</span>
    <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;notes.txt&#39;</span><span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">server</span><span class="o">.</span><span class="n">handle_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">])</span>
</code></pre></div>

<h3 id="mcp-client">MCP Client</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MCPClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Client for connecting to MCP servers</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">server_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_url</span> <span class="o">=</span> <span class="n">server_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tools</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Connect to server and discover capabilities</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Discover capabilities</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">({</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;list_capabilities&#39;</span>
        <span class="p">})</span>

        <span class="c1"># Discover tools</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tools</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">({</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;list_tools&#39;</span>
        <span class="p">})</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;server&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
            <span class="s1">&#39;tools&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="p">[</span><span class="s1">&#39;tools&#39;</span><span class="p">])</span>
        <span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send request to MCP server</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># In real implementation, use HTTP/WebSocket</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">http</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">use_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Invoke a tool on the server</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">({</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;invoke_tool&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tool_name&#39;</span><span class="p">:</span> <span class="n">tool_name</span><span class="p">,</span>
            <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="n">kwargs</span>
        <span class="p">})</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;success&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;Unknown error&#39;</span><span class="p">))</span>


<span class="c1"># Usage</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">MCPClient</span><span class="p">(</span><span class="s2">&quot;http://localhost:8080/mcp&quot;</span><span class="p">)</span>
<span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="c1"># Use server tools</span>
<span class="n">file_contents</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">use_tool</span><span class="p">(</span><span class="s1">&#39;read_file&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;readme.md&#39;</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">use_tool</span><span class="p">(</span><span class="s1">&#39;list_files&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
</code></pre></div>

<h2 id="quick-win-simple-mcp-server-in-20-lines">âš¡ Quick Win: Simple MCP Server in 20 Lines</h2>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MCPRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/mcp&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">mcp_endpoint</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">MCPRequest</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;list_tools&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;tools&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Echo input&quot;</span><span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>

    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;invoke_tool&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tool&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;echo&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
                <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">)</span>
            <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Unknown request&quot;</span><span class="p">}</span>

<span class="c1"># Run: uvicorn mcp_server:app --port 8080</span>
</code></pre></div>

<h2 id="advanced-production-mcp-server">ğŸŒ³ Advanced: Production MCP Server</h2>
<h3 id="full-featured-mcp-server">Full-Featured MCP Server</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">HTTPException</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">class</span> <span class="nc">MCPServer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Production-grade MCP server</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;MCP Server&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tools</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contexts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">middleware</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setup_routes</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_routes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setup MCP endpoints</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/mcp/capabilities&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">get_capabilities</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;server&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;ProductionMCPServer&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;protocol_version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;capabilities&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;tools&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s2">&quot;contexts&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s2">&quot;streaming&quot;</span><span class="p">:</span> <span class="kc">False</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/mcp/tools&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">list_tools</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;tools&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">tool</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">],</span>
                        <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="n">tool</span><span class="p">[</span><span class="s1">&#39;parameters&#39;</span><span class="p">]</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">tool</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="p">]</span>
            <span class="p">}</span>

        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/mcp/tools/</span><span class="si">{tool_name}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">invoke_tool</span><span class="p">(</span><span class="n">tool_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">tool_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Tool </span><span class="si">{</span><span class="n">tool_name</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>

            <span class="c1"># Apply middleware</span>
            <span class="k">for</span> <span class="n">middleware</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">middleware</span><span class="p">:</span>
                <span class="n">request</span> <span class="o">=</span> <span class="k">await</span> <span class="n">middleware</span><span class="o">.</span><span class="n">pre_invoke</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

            <span class="c1"># Execute tool</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="p">[</span><span class="n">tool_name</span><span class="p">][</span><span class="s1">&#39;handler&#39;</span><span class="p">](</span><span class="n">request</span><span class="p">)</span>

                <span class="c1"># Apply post-middleware</span>
                <span class="k">for</span> <span class="n">middleware</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">middleware</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">middleware</span><span class="o">.</span><span class="n">post_invoke</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

                <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">result</span>
                <span class="p">}</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="p">}</span>

    <span class="k">def</span> <span class="nf">register_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                     <span class="n">parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="nb">callable</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register a tool with schema</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tools</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
            <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">,</span>
            <span class="s1">&#39;handler&#39;</span><span class="p">:</span> <span class="n">handler</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">add_middleware</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">middleware</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add request/response middleware</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">middleware</span><span class="p">)</span>


<span class="c1"># Example: Document Search MCP Server</span>
<span class="k">class</span> <span class="nc">DocumentSearchMCP</span><span class="p">(</span><span class="n">MCPServer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MCP server for document search and retrieval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document_store</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doc_store</span> <span class="o">=</span> <span class="n">document_store</span>

        <span class="c1"># Register search tool</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_tool</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;search_documents&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Search documents by query&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Search query&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">},</span>
                <span class="s2">&quot;max_results&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Maximum results to return&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">10</span>
                <span class="p">},</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Optional filters&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">False</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">search_handler</span>
        <span class="p">)</span>

        <span class="c1"># Register retrieve tool</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_tool</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;get_document&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Retrieve full document by ID&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;doc_id&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Document identifier&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">retrieve_handler</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">search_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle document search</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;query&#39;</span><span class="p">]</span>
        <span class="n">max_results</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;max_results&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;filters&#39;</span><span class="p">,</span> <span class="p">{})</span>

        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc_store</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
            <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">max_results</span><span class="p">,</span>
            <span class="o">**</span><span class="n">filters</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                <span class="s1">&#39;snippet&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="o">.</span><span class="n">snippet</span><span class="p">,</span>
                <span class="s1">&#39;relevance&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="o">.</span><span class="n">score</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">results</span>
        <span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">retrieve_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle document retrieval</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">doc_id</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;doc_id&#39;</span><span class="p">]</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc_store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">doc_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
            <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="o">.</span><span class="n">content</span><span class="p">,</span>
            <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="o">.</span><span class="n">metadata</span>
        <span class="p">}</span>


<span class="c1"># Run the server</span>
<span class="n">doc_store</span> <span class="o">=</span> <span class="n">DocumentStore</span><span class="p">()</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">DocumentSearchMCP</span><span class="p">(</span><span class="n">doc_store</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">uvicorn</span>
    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">app</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">)</span>
</code></pre></div>

<h2 id="real-world-mcp-implementations">ğŸ¯ Real-World MCP Implementations</h2>
<h3 id="1-database-mcp-server">1. Database MCP Server</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">DatabaseMCPServer</span><span class="p">(</span><span class="n">MCPServer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MCP server for database access</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_connection</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_connection</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">register_tool</span><span class="p">(</span>
            <span class="s2">&quot;query_database&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Execute read-only SQL query&quot;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;sql&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
                <span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}</span>
            <span class="p">},</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query_handler</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">query_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute database query safely</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;sql&#39;</span><span class="p">]</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

        <span class="c1"># Validate read-only</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sql</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;SELECT&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only SELECT queries allowed&quot;</span><span class="p">)</span>

        <span class="c1"># Execute with limit</span>
        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sql</span><span class="si">}</span><span class="s2"> LIMIT </span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
</code></pre></div>

<h3 id="2-api-wrapper-mcp-server">2. API Wrapper MCP Server</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">APIWrapperMCPServer</span><span class="p">(</span><span class="n">MCPServer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MCP server wrapping external API</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">api_key</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">register_tool</span><span class="p">(</span>
            <span class="s2">&quot;get_weather&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Get weather for location&quot;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
            <span class="p">},</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">weather_handler</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">weather_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch weather data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">location</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">http</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;https://api.weather.com/forecast&quot;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="n">location</span><span class="p">,</span> <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">}</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div>

<h2 id="key-takeaways">ğŸ¯ Key Takeaways</h2>
<ul>
<li><strong>MCP standardizes</strong> how apps provide context to LLMs</li>
<li><strong>Universal protocol</strong> works across different systems</li>
<li><strong>Plug-and-play</strong> architecture enables reusability</li>
<li><strong>Capability discovery</strong> makes servers self-describing</li>
<li><strong>Tool invocation</strong> provides structured interactions</li>
</ul>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-clear-tool-descriptions">1. Clear Tool Descriptions</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># âœ… Good: Detailed description</span>
<span class="s2">&quot;Search customer database by name, email, or ID. Returns up to 10 matches.&quot;</span>

<span class="c1"># âŒ Bad: Vague description</span>
<span class="s2">&quot;Search customers&quot;</span>
</code></pre></div>

<h3 id="2-parameter-schemas">2. Parameter Schemas</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># âœ… Good: Detailed schema</span>
<span class="p">{</span>
    <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Search query&quot;</span><span class="p">,</span>
        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="s2">&quot;john@example.com&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># âŒ Bad: Minimal schema</span>
<span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}</span>
</code></pre></div>

<h3 id="3-error-handling">3. Error Handling</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># âœ… Good: Structured errors</span>
<span class="p">{</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
    <span class="s2">&quot;error_code&quot;</span><span class="p">:</span> <span class="s2">&quot;INVALID_QUERY&quot;</span><span class="p">,</span>
    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Query must be at least 3 characters&quot;</span><span class="p">,</span>
    <span class="s2">&quot;retry_allowed&quot;</span><span class="p">:</span> <span class="kc">True</span>
<span class="p">}</span>

<span class="c1"># âŒ Bad: Generic error</span>
<span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Bad request&quot;</span><span class="p">}</span>
</code></pre></div>

<h2 id="next-steps">Next Steps</h2>
<p>Continue to <a href="./02-a2a.md">Agent2Agent Protocol (A2A)</a> to learn about inter-agent communication.</p>
<hr />
<p>ğŸ’¡ <strong>Remember</strong>: MCP is the universal adapter that makes your context providers work with any LLM client.</p>
                </div>
                
                <footer class="book-footer">
                    <div class="book-footer-content">
                        <p>Built with BookGen - A modern GitBook alternative</p>
                        <p>Generated on 2025-11-15 19:18:13</p>
                    </div>
                </footer>
            </main>
            
            
        </div>
    </div>
    
    <script src="/assets/script.js"></script>
</body>
</html>