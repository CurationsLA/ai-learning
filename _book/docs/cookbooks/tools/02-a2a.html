<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Open-source frameworks, guides, and resources for AI development, collaboration, and creativity">
    <meta name="author" content="VibeHub">
    <title>Agent2Agent Protocol (A2A) - VibeHub - Human Ã— AI Creative Agency</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/highlight.css">
</head>
<body>
    <div class="book-container">
        <div class="book-header">
            <div class="book-header-content">
                <h1 class="book-title">VibeHub - Human Ã— AI Creative Agency</h1>
                <div class="book-header-controls">
                    <input type="search" class="search-input" placeholder="Search..." id="search-input">
                    <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
                        <span class="theme-icon">ğŸŒ“</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="book-body">
            <nav class="book-sidebar">
<div class="book-sidebar-content">
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ  Welcome to CURATIONS</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/readme.html">Start Here</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curations.html">About CURATIONS</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curationsla.html">About CurationsLA</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸŒŸ Core Initiatives</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/the-curators.html">The Curators (AI Personas)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/youth-curator-movement.html">Youth Curator Movement</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¨ How We Build</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/design-systems.html">Design Systems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/technical-architecture.html">Technical Architecture</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ“š The AI Ã— Human Cookbook</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/README.html">About the Cookbook</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸŒ± Foundations: AI Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/01-interoperability-intro.html">Introduction to Interoperability</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/02-model-garden.html">Model Garden & Foundation Models</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/03-memory-management.html">Memory Management</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ” RAG & Knowledge Systems</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/01-rag-fundamentals.html">RAG Fundamentals</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/02-agentic-rag.html">Agentic RAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/03-graph-rag.html">GraphRAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/04-grounding.html">Grounding Techniques</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¤– Agent Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/01-adk-overview.html">Agent Development Kits (ADK)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/02-agent-types.html">Agent Types</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/03-agent-models.html">Agent Models & Contracts</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/04-defining-llm-agents.html">Defining LLM Agents</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ› ï¸ Tools & Integration</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/01-mcp.html">Model Context Protocol (MCP)</a>
</li>
<li class="sidebar-item active">
  <a href="/docs/cookbooks/tools/02-a2a.html">Agent2Agent Protocol (A2A)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/03-tool-ecosystems.html">Tool Ecosystems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/04-agent-engines.html">AI Agent Engines</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ§  Advanced Prompting</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/README.html">Overview: Advanced Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/context-manipulation.html">Context Manipulation</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/emoji-protocol.html">Emoji Protocol</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/meta-prompting.html">Meta-Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/quantum-prompting.html">Quantum Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/temporal-debugging.html">Temporal Debugging</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¨ Business: Branding & Growth</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/README.html">Overview: AI-Powered Business</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/quantum-brand-engine.html">Quantum Brand Engine</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/brand-archaeology.html">Brand Archaeology</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/ai-discovery-singularity.html">AI Discovery Singularity (AAO)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/schema-mastery.html">Schema.org Mastery</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/creator-engine.html">Creator Singularity Engine</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸš€ Going Legendary</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/full-stack-ai.html">Full-Stack AI Applications</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/production-deployment.html">Production Deployment</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/scaling.html">Scaling Strategies</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/the-future.html">The Future We're Building</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¤ Get Involved</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/get-involved.html">How to Contribute, Learn & Collaborate</a>
</li>
</ul>
</div>
</div>
</nav>

            
            <main class="book-main">
                <div class="book-content">
                    <h1 id="agent2agent-protocol-a2a-inter-agent-communication">ğŸ¤ Agent2Agent Protocol (A2A): Inter-Agent Communication</h1>
<h2 id="growing-concept">ğŸŒ¿ Growing Concept</h2>
<p><strong>Label</strong>: Agents Collaborating with Agents</p>
<p>The <strong>Agent2Agent Protocol (A2A)</strong> is an open standard designed to enable direct communication and collaboration between AI agents. While MCP connects applications to models, A2A enables agents to discover, communicate with, and delegate tasks to other agents.</p>
<h2 id="what-is-a2a">What is A2A?</h2>
<h3 id="the-multi-agent-challenge">The Multi-Agent Challenge</h3>
<div class="codehilite"><pre><span></span><code>Without A2A:                      With A2A:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent A â”‚                      â”‚ Agent A â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                â”‚ A2A request
     â”‚ Manual                          â–¼
     â”‚ integration              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼                          â”‚ A2A Registryâ”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
â”‚ Agent B â”‚                            â”‚ discover
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                            â–¼
     â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Different                 â”‚ Agent B â”‚â—„â”€â”€â”
     â”‚ protocols                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
     â–¼                                â”‚        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚ A2A    â”‚ A2A
â”‚ Agent C â”‚                           â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â–¼        â”‚
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
Agents can&#39;t                     â”‚ Agent C â”‚â”€â”€â”€â”˜
collaborate                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                 Agents collaborate
                                 seamlessly
</code></pre></div>

<h2 id="a2a-core-concepts">ğŸ’¡ A2A Core Concepts</h2>
<h3 id="1-agent-discovery">1. Agent Discovery</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">A2ARegistry</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Registry for agent discovery</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agents</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">register_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> 
                      <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register an agent with its capabilities</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="p">[</span><span class="n">agent_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;capabilities&#39;</span><span class="p">:</span> <span class="n">capabilities</span><span class="p">,</span>
            <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span> <span class="n">endpoint</span><span class="p">,</span>
            <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="n">metadata</span><span class="p">,</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;available&#39;</span><span class="p">,</span>
            <span class="s1">&#39;registered_at&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">find_agents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capability</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find agents with specific capability</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">matching_agents</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">agent_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">capability</span> <span class="ow">in</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;capabilities&#39;</span><span class="p">]:</span>
                <span class="n">matching_agents</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">agent_id</span><span class="p">,</span>
                    <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;endpoint&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span>
                <span class="p">})</span>

        <span class="k">return</span> <span class="n">matching_agents</span>

    <span class="k">def</span> <span class="nf">get_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get specific agent information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">agents</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span>


<span class="c1"># Usage</span>
<span class="n">registry</span> <span class="o">=</span> <span class="n">A2ARegistry</span><span class="p">()</span>

<span class="c1"># Register agents</span>
<span class="n">registry</span><span class="o">.</span><span class="n">register_agent</span><span class="p">(</span>
    <span class="n">agent_id</span><span class="o">=</span><span class="s2">&quot;research_agent_1&quot;</span><span class="p">,</span>
    <span class="n">capabilities</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span> <span class="s2">&quot;document_analysis&quot;</span><span class="p">,</span> <span class="s2">&quot;summarization&quot;</span><span class="p">],</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://agent1.example.com/a2a&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Research Specialist&quot;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Expert in research and information gathering&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">registry</span><span class="o">.</span><span class="n">register_agent</span><span class="p">(</span>
    <span class="n">agent_id</span><span class="o">=</span><span class="s2">&quot;writer_agent_1&quot;</span><span class="p">,</span>
    <span class="n">capabilities</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;content_generation&quot;</span><span class="p">,</span> <span class="s2">&quot;editing&quot;</span><span class="p">,</span> <span class="s2">&quot;formatting&quot;</span><span class="p">],</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;https://agent2.example.com/a2a&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Content Writer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Expert in content creation&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Find agents</span>
<span class="n">researchers</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">find_agents</span><span class="p">(</span><span class="s2">&quot;web_search&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">researchers</span><span class="p">)</span><span class="si">}</span><span class="s2"> research agents&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="2-agent-communication">2. Agent Communication</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">A2AClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Client for A2A communication</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">A2ARegistry</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agent_id</span> <span class="o">=</span> <span class="n">agent_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registry</span> <span class="o">=</span> <span class="n">registry</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">send_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                          <span class="n">task</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send task request to another agent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get target agent info</span>
        <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">get_agent</span><span class="p">(</span><span class="n">target_agent_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">target</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Agent not found&#39;</span><span class="p">}</span>

        <span class="c1"># Build A2A request</span>
        <span class="n">request</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;A2A/1.0&#39;</span><span class="p">,</span>
            <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent_id</span><span class="p">,</span>
            <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="n">target_agent_id</span><span class="p">,</span>
            <span class="s1">&#39;task&#39;</span><span class="p">:</span> <span class="n">task</span><span class="p">,</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="c1"># Send to target agent</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_to_endpoint</span><span class="p">(</span>
            <span class="n">target</span><span class="p">[</span><span class="s1">&#39;endpoint&#39;</span><span class="p">],</span> 
            <span class="n">request</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">send_to_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                              <span class="n">request</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send HTTP request to agent endpoint</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">/task&quot;</span><span class="p">,</span>
                <span class="n">json</span><span class="o">=</span><span class="n">request</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delegate_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capability</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                           <span class="n">task_description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                           <span class="n">context</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find suitable agent and delegate task</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Find agents with required capability</span>
        <span class="n">agents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">find_agents</span><span class="p">(</span><span class="n">capability</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">agents</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;No agents found with capability: </span><span class="si">{</span><span class="n">capability</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="p">}</span>

        <span class="c1"># Select best agent (can be more sophisticated)</span>
        <span class="n">selected_agent</span> <span class="o">=</span> <span class="n">agents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Send task</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span>
            <span class="n">target_agent_id</span><span class="o">=</span><span class="n">selected_agent</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
            <span class="n">task</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">capability</span><span class="p">,</span>
                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">task_description</span><span class="p">,</span>
                <span class="s1">&#39;context&#39;</span><span class="p">:</span> <span class="n">context</span> <span class="ow">or</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span>


<span class="c1"># Usage</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">A2AClient</span><span class="p">(</span><span class="s2">&quot;coordinator_agent&quot;</span><span class="p">,</span> <span class="n">registry</span><span class="p">)</span>

<span class="c1"># Delegate research task</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">delegate_task</span><span class="p">(</span>
    <span class="n">capability</span><span class="o">=</span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span>
    <span class="n">task_description</span><span class="o">=</span><span class="s2">&quot;Find latest AI research papers on RAG&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;max_results&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;recency&quot;</span><span class="p">:</span> <span class="s2">&quot;last_month&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>

<h3 id="3-task-execution">3. Task Execution</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">A2AAgent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Agent with A2A support</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capabilities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agent_id</span> <span class="o">=</span> <span class="n">agent_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="n">capabilities</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">task_handlers</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setup_endpoints</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_endpoints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setup A2A endpoints</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/a2a/capabilities&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">get_capabilities</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;agent_id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent_id</span><span class="p">,</span>
                <span class="s1">&#39;capabilities&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">,</span>
                <span class="s1">&#39;protocol_version&#39;</span><span class="p">:</span> <span class="s1">&#39;1.0&#39;</span>
            <span class="p">}</span>

        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/a2a/task&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_task</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_task</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">process_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process incoming A2A task request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">request</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">]</span>
        <span class="n">task_type</span> <span class="o">=</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>

        <span class="c1"># Verify capability</span>
        <span class="k">if</span> <span class="n">task_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
                <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Capability </span><span class="si">{</span><span class="n">task_type</span><span class="si">}</span><span class="s1"> not supported&#39;</span>
            <span class="p">}</span>

        <span class="c1"># Execute task</span>
        <span class="k">if</span> <span class="n">task_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_handlers</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_handlers</span><span class="p">[</span><span class="n">task_type</span><span class="p">](</span><span class="n">task</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span>
                    <span class="s1">&#39;agent_id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent_id</span>
                <span class="p">}</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
            <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;No handler for task type&#39;</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">register_task_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capability</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="nb">callable</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register handler for a capability</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">task_handlers</span><span class="p">[</span><span class="n">capability</span><span class="p">]</span> <span class="o">=</span> <span class="n">handler</span>


<span class="c1"># Example: Research Agent</span>
<span class="k">class</span> <span class="nc">ResearchAgent</span><span class="p">(</span><span class="n">A2AAgent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized research agent with A2A support</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">agent_id</span><span class="o">=</span><span class="s2">&quot;research_agent_1&quot;</span><span class="p">,</span>
            <span class="n">capabilities</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span> <span class="s2">&quot;document_analysis&quot;</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Register handlers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_task_handler</span><span class="p">(</span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_web_search</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_task_handler</span><span class="p">(</span><span class="s2">&quot;document_analysis&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_analysis</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_web_search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle web search requests</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;context&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">max_results</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;max_results&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Perform search</span>
        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_web</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">max_results</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
            <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">results</span><span class="p">,</span>
            <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">handle_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle document analysis requests</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">document</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;context&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;document&#39;</span><span class="p">)</span>

        <span class="c1"># Analyze document</span>
        <span class="n">analysis</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_document</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;summary&#39;</span><span class="p">:</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;summary&#39;</span><span class="p">],</span>
            <span class="s1">&#39;key_points&#39;</span><span class="p">:</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;key_points&#39;</span><span class="p">],</span>
            <span class="s1">&#39;sentiment&#39;</span><span class="p">:</span> <span class="n">analysis</span><span class="p">[</span><span class="s1">&#39;sentiment&#39;</span><span class="p">]</span>
        <span class="p">}</span>
</code></pre></div>

<h2 id="deep-dive-multi-agent-workflows">ğŸ”¬ Deep Dive: Multi-Agent Workflows</h2>
<h3 id="coordinated-multi-agent-system">Coordinated Multi-Agent System</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MultiAgentCoordinator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Coordinates multiple agents for complex tasks</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">A2ARegistry</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registry</span> <span class="o">=</span> <span class="n">registry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">A2AClient</span><span class="p">(</span><span class="s2">&quot;coordinator&quot;</span><span class="p">,</span> <span class="n">registry</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">execute_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workflow_spec</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute multi-agent workflow</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">workflow_spec</span><span class="p">[</span><span class="s1">&#39;steps&#39;</span><span class="p">]:</span>
            <span class="n">step_id</span> <span class="o">=</span> <span class="n">step</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">capability</span> <span class="o">=</span> <span class="n">step</span><span class="p">[</span><span class="s1">&#39;capability&#39;</span><span class="p">]</span>
            <span class="n">depends_on</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;depends_on&#39;</span><span class="p">,</span> <span class="p">[])</span>

            <span class="c1"># Wait for dependencies</span>
            <span class="n">context</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">dep_id</span> <span class="ow">in</span> <span class="n">depends_on</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">dep_id</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
                    <span class="n">context</span><span class="p">[</span><span class="n">dep_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">dep_id</span><span class="p">]</span>

            <span class="c1"># Execute step</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">delegate_task</span><span class="p">(</span>
                <span class="n">capability</span><span class="o">=</span><span class="n">capability</span><span class="p">,</span>
                <span class="n">task_description</span><span class="o">=</span><span class="n">step</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">],</span>
                <span class="n">context</span><span class="o">=</span><span class="n">context</span>
            <span class="p">)</span>

            <span class="n">results</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>

        <span class="k">return</span> <span class="n">results</span>


<span class="c1"># Example workflow</span>
<span class="n">workflow</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;steps&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;research&#39;</span><span class="p">,</span>
            <span class="s1">&#39;capability&#39;</span><span class="p">:</span> <span class="s1">&#39;web_search&#39;</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Research AI agent architectures&#39;</span><span class="p">,</span>
            <span class="s1">&#39;depends_on&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;analyze&#39;</span><span class="p">,</span>
            <span class="s1">&#39;capability&#39;</span><span class="p">:</span> <span class="s1">&#39;document_analysis&#39;</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Analyze research findings&#39;</span><span class="p">,</span>
            <span class="s1">&#39;depends_on&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;research&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;write&#39;</span><span class="p">,</span>
            <span class="s1">&#39;capability&#39;</span><span class="p">:</span> <span class="s1">&#39;content_generation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Write summary article&#39;</span><span class="p">,</span>
            <span class="s1">&#39;depends_on&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;research&#39;</span><span class="p">,</span> <span class="s1">&#39;analyze&#39;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="n">coordinator</span> <span class="o">=</span> <span class="n">MultiAgentCoordinator</span><span class="p">(</span><span class="n">registry</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">coordinator</span><span class="o">.</span><span class="n">execute_workflow</span><span class="p">(</span><span class="n">workflow</span><span class="p">)</span>
</code></pre></div>

<h2 id="quick-win-simple-a2a-system">âš¡ Quick Win: Simple A2A System</h2>
<h3 id="20-minute-implementation">20-Minute Implementation</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">import</span> <span class="nn">httpx</span>

<span class="k">class</span> <span class="nc">SimpleA2AAgent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Minimal A2A-compatible agent</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">skill</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skill</span> <span class="o">=</span> <span class="n">skill</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

        <span class="nd">@self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/task&quot;</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="n">task</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">task</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">skill</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">task</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">])</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">}</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;Unsupported task&#39;</span><span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="c1"># Implement skill</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> processed: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">task_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">agent_url</span><span class="si">}</span><span class="s2">/task&quot;</span><span class="p">,</span>
                <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">task_type</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>


<span class="c1"># Create agents</span>
<span class="n">researcher</span> <span class="o">=</span> <span class="n">SimpleA2AAgent</span><span class="p">(</span><span class="s2">&quot;Researcher&quot;</span><span class="p">,</span> <span class="s2">&quot;research&quot;</span><span class="p">)</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">SimpleA2AAgent</span><span class="p">(</span><span class="s2">&quot;Writer&quot;</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>

<span class="c1"># Researcher delegates to writer</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">researcher</span><span class="o">.</span><span class="n">delegate</span><span class="p">(</span>
    <span class="s2">&quot;http://localhost:8001&quot;</span><span class="p">,</span>
    <span class="s2">&quot;write&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Research findings about RAG systems&quot;</span>
<span class="p">)</span>
</code></pre></div>

<h2 id="advanced-intelligent-agent-selection">ğŸŒ³ Advanced: Intelligent Agent Selection</h2>
<h3 id="capability-matching-and-load-balancing">Capability Matching and Load Balancing</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">IntelligentA2ARouter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Smart routing for A2A requests</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">A2ARegistry</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registry</span> <span class="o">=</span> <span class="n">registry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agent_metrics</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">select_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capability</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                          <span class="n">requirements</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Select best agent for task</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Find capable agents</span>
        <span class="n">agents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">find_agents</span><span class="p">(</span><span class="n">capability</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">agents</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Score each agent</span>
        <span class="n">scored_agents</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
            <span class="n">score</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_agent</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">requirements</span> <span class="ow">or</span> <span class="p">{})</span>
            <span class="n">scored_agents</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">score</span><span class="p">,</span> <span class="n">agent</span><span class="p">))</span>

        <span class="c1"># Select highest scoring</span>
        <span class="n">best_agent</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">scored_agents</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">best_agent</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">score_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> 
                         <span class="n">requirements</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Score agent based on multiple factors</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">score</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="c1"># Factor 1: Current load (prefer less busy agents)</span>
        <span class="n">load</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_agent_load</span><span class="p">(</span><span class="n">agent</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">load</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.4</span>

        <span class="c1"># Factor 2: Performance history</span>
        <span class="n">performance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">agent</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;success_rate&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="n">performance</span> <span class="o">*</span> <span class="mf">0.3</span>

        <span class="c1"># Factor 3: Response time</span>
        <span class="n">avg_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent_metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">agent</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;avg_response_ms&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">avg_response</span> <span class="o">/</span> <span class="mi">2000</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span> <span class="o">*</span> <span class="mf">0.2</span>

        <span class="c1"># Factor 4: Specialization match</span>
        <span class="k">if</span> <span class="s1">&#39;preferred_tasks&#39;</span> <span class="ow">in</span> <span class="n">requirements</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="k">if</span> <span class="n">requirements</span><span class="p">[</span><span class="s1">&#39;preferred_tasks&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;specialties&#39;</span><span class="p">,</span> <span class="p">[]):</span>
                <span class="n">score</span> <span class="o">+=</span> <span class="mf">0.1</span>

        <span class="k">return</span> <span class="n">score</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_agent_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current agent load (0.0 = idle, 1.0 = full)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Query agent for current load</span>
        <span class="n">agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">get_agent</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">agent</span><span class="p">[</span><span class="s1">&#39;endpoint&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/metrics&quot;</span><span class="p">)</span>
                <span class="n">metrics</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">metrics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.5</span>  <span class="c1"># Default if unavailable</span>
</code></pre></div>

<h2 id="real-world-a2a-patterns">ğŸ¯ Real-World A2A Patterns</h2>
<h3 id="pattern-1-pipeline-pattern">Pattern 1: Pipeline Pattern</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelinePattern</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Chain agents in a pipeline</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">execute_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> 
                              <span class="n">initial_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pass data through agent pipeline</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">initial_data</span>

        <span class="k">for</span> <span class="n">agent_id</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="p">{</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;process&#39;</span><span class="p">,</span>
                <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">data</span>
            <span class="p">})</span>

            <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;success&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">response</span>

            <span class="c1"># Output of one agent becomes input to next</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>


<span class="c1"># Usage</span>
<span class="n">pipeline</span> <span class="o">=</span> <span class="n">PipelinePattern</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">execute_pipeline</span><span class="p">(</span>
    <span class="n">agents</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;data_collector&#39;</span><span class="p">,</span> <span class="s1">&#39;data_processor&#39;</span><span class="p">,</span> <span class="s1">&#39;report_generator&#39;</span><span class="p">],</span>
    <span class="n">initial_data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="s1">&#39;Q4 sales&#39;</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>

<h3 id="pattern-2-competitive-pattern">Pattern 2: Competitive Pattern</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CompetitivePattern</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Multiple agents compete, best result wins</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">compete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">task</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send task to multiple agents, return best result</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Send to all agents in parallel</span>
        <span class="n">responses</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">agent_id</span> <span class="ow">in</span> <span class="n">agents</span>
        <span class="p">])</span>

        <span class="c1"># Score responses</span>
        <span class="n">scored</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="n">responses</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;success&#39;</span><span class="p">:</span>
                <span class="n">score</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_response</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">])</span>
                <span class="n">scored</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">score</span><span class="p">,</span> <span class="n">response</span><span class="p">))</span>

        <span class="c1"># Return best</span>
        <span class="k">if</span> <span class="n">scored</span><span class="p">:</span>
            <span class="n">best</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">scored</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">best</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;All agents failed&#39;</span><span class="p">}</span>
</code></pre></div>

<h3 id="pattern-3-consensus-pattern">Pattern 3: Consensus Pattern</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ConsensusPattern</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Multiple agents vote on result</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">reach_consensus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> 
                             <span class="n">task</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
                             <span class="n">threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Agents vote, require threshold agreement</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get responses from all agents</span>
        <span class="n">responses</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">send_request</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">agent_id</span> <span class="ow">in</span> <span class="n">agents</span>
        <span class="p">])</span>

        <span class="c1"># Collect results</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">responses</span> <span class="k">if</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;success&#39;</span><span class="p">]</span>

        <span class="c1"># Find consensus</span>
        <span class="n">consensus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_most_common</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="n">agreement</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">consensus</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">agreement</span> <span class="o">&gt;=</span> <span class="n">threshold</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
                <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">consensus</span><span class="p">,</span>
                <span class="s1">&#39;consensus_level&#39;</span><span class="p">:</span> <span class="n">agreement</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;no_consensus&#39;</span><span class="p">,</span>
            <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">results</span><span class="p">,</span>
            <span class="s1">&#39;agreement&#39;</span><span class="p">:</span> <span class="n">agreement</span>
        <span class="p">}</span>
</code></pre></div>

<h2 id="key-takeaways">ğŸ¯ Key Takeaways</h2>
<ul>
<li><strong>A2A enables agent collaboration</strong> through standardized protocol</li>
<li><strong>Discovery</strong> allows agents to find suitable collaborators</li>
<li><strong>Delegation</strong> distributes work across specialist agents</li>
<li><strong>Coordination</strong> enables complex multi-agent workflows</li>
<li><strong>Patterns</strong> like pipeline, competitive, and consensus solve common problems</li>
</ul>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-clear-capability-definitions">1. Clear Capability Definitions</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># âœ… Good: Specific capabilities</span>
<span class="n">capabilities</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;web_search&quot;</span><span class="p">,</span> <span class="s2">&quot;pdf_parsing&quot;</span><span class="p">,</span> <span class="s2">&quot;entity_extraction&quot;</span><span class="p">]</span>

<span class="c1"># âŒ Bad: Vague capabilities</span>
<span class="n">capabilities</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;research&quot;</span><span class="p">,</span> <span class="s2">&quot;analysis&quot;</span><span class="p">]</span>
</code></pre></div>

<h3 id="2-structured-task-descriptions">2. Structured Task Descriptions</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># âœ… Good: Well-defined task</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;web_search&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Find research papers on GraphRAG from 2024&#39;</span><span class="p">,</span>
    <span class="s1">&#39;context&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;max_results&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s1">&#39;date_range&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-01-01,2024-12-31&#39;</span><span class="p">,</span>
        <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;arxiv&#39;</span><span class="p">,</span> <span class="s1">&#39;acm&#39;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># âŒ Bad: Ambiguous task</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;search&#39;</span><span class="p">,</span>
    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;GraphRAG papers&#39;</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="3-error-handling-and-fallbacks">3. Error Handling and Fallbacks</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># âœ… Good: Handle failures gracefully</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">delegate_with_fallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_agent</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">fallback_agent</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

<span class="c1"># âŒ Bad: No error handling</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
</code></pre></div>

<h2 id="next-steps">Next Steps</h2>
<p>Continue to <a href="./03-tool-ecosystems.md">Tool Ecosystems</a> to learn about integrating with existing frameworks like LangChain and CrewAI.</p>
<hr />
<p>ğŸ’¡ <strong>Remember</strong>: A2A transforms isolated agents into a collaborative team where specialized agents work together to solve complex problems.</p>
                </div>
                
                <footer class="book-footer">
                    <div class="book-footer-content">
                        <p>Built with BookGen - A modern GitBook alternative</p>
                        <p>Generated on 2025-11-15 19:18:13</p>
                    </div>
                </footer>
            </main>
            
            
        </div>
    </div>
    
    <script src="/assets/script.js"></script>
</body>
</html>