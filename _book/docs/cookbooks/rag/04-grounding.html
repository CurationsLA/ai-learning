<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Open-source frameworks, guides, and resources for AI development, collaboration, and creativity">
    <meta name="author" content="VibeHub">
    <title>Grounding Techniques - VibeHub - Human Ã— AI Creative Agency</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/highlight.css">
</head>
<body>
    <div class="book-container">
        <div class="book-header">
            <div class="book-header-content">
                <h1 class="book-title">VibeHub - Human Ã— AI Creative Agency</h1>
                <div class="book-header-controls">
                    <input type="search" class="search-input" placeholder="Search..." id="search-input">
                    <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
                        <span class="theme-icon">ğŸŒ“</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="book-body">
            <nav class="book-sidebar">
<div class="book-sidebar-content">
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ  Welcome to CURATIONS</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/readme.html">Start Here</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curations.html">About CURATIONS</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/about-curationsla.html">About CurationsLA</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸŒŸ Core Initiatives</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/the-curators.html">The Curators (AI Personas)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/youth-curator-movement.html">Youth Curator Movement</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¨ How We Build</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/design-systems.html">Design Systems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/technical-architecture.html">Technical Architecture</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ“š The AI Ã— Human Cookbook</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/README.html">About the Cookbook</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸŒ± Foundations: AI Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/01-interoperability-intro.html">Introduction to Interoperability</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/02-model-garden.html">Model Garden & Foundation Models</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/foundations/03-memory-management.html">Memory Management</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ” RAG & Knowledge Systems</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/01-rag-fundamentals.html">RAG Fundamentals</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/02-agentic-rag.html">Agentic RAG</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/rag/03-graph-rag.html">GraphRAG</a>
</li>
<li class="sidebar-item active">
  <a href="/docs/cookbooks/rag/04-grounding.html">Grounding Techniques</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¤– Agent Development</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/01-adk-overview.html">Agent Development Kits (ADK)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/02-agent-types.html">Agent Types</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/03-agent-models.html">Agent Models & Contracts</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/agents/04-defining-llm-agents.html">Defining LLM Agents</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ› ï¸ Tools & Integration</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/01-mcp.html">Model Context Protocol (MCP)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/02-a2a.html">Agent2Agent Protocol (A2A)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/03-tool-ecosystems.html">Tool Ecosystems</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/tools/04-agent-engines.html">AI Agent Engines</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ§  Advanced Prompting</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/README.html">Overview: Advanced Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/context-manipulation.html">Context Manipulation</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/emoji-protocol.html">Emoji Protocol</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/meta-prompting.html">Meta-Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/quantum-prompting.html">Quantum Prompting</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/advanced-prompting/temporal-debugging.html">Temporal Debugging</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¨ Business: Branding & Growth</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/README.html">Overview: AI-Powered Business</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/quantum-brand-engine.html">Quantum Brand Engine</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/brand-archaeology.html">Brand Archaeology</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/ai-discovery-singularity.html">AI Discovery Singularity (AAO)</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/schema-mastery.html">Schema.org Mastery</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/business/creator-engine.html">Creator Singularity Engine</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸš€ Going Legendary</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/full-stack-ai.html">Full-Stack AI Applications</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/production-deployment.html">Production Deployment</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/scaling.html">Scaling Strategies</a>
</li>
<li class="sidebar-item ">
  <a href="/docs/cookbooks/legendary/the-future.html">The Future We're Building</a>
</li>
</ul>
</div>
<div class="sidebar-section">
<h3 class="sidebar-section-title">ğŸ¤ Get Involved</h3>
<ul class="sidebar-list">
<li class="sidebar-item ">
  <a href="/docs/get-involved.html">How to Contribute, Learn & Collaborate</a>
</li>
</ul>
</div>
</div>
</nav>

            
            <main class="book-main">
                <div class="book-content">
                    <h1 id="grounding-keeping-ai-agents-accurate-and-reliable">âš“ Grounding: Keeping AI Agents Accurate and Reliable</h1>
<h2 id="flourishing-concept">ğŸŒ³ Flourishing Concept</h2>
<p><strong>Label</strong>: Anchoring AI in Reality</p>
<p><strong>Grounding</strong> is the practice of anchoring AI agent responses in factual, verifiable information. It's the difference between an agent that "sounds confident" and one that is actually accurate and reliable.</p>
<h2 id="what-is-grounding">What is Grounding?</h2>
<h3 id="the-hallucination-problem">The Hallucination Problem</h3>
<div class="codehilite"><pre><span></span><code>Without Grounding:                With Grounding:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Query    â”‚                  â”‚    Query    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                â”‚
       â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     LLM     â”‚                  â”‚ Retrieval   â”‚
â”‚   Memory    â”‚                  â”‚   System    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                â”‚
       â”‚ May hallucinate                â–¼
       â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼                          â”‚   Facts &amp;   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   Sources   â”‚
â”‚  Response   â”‚                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
â”‚ (Unverified)â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚     LLM     â”‚
                                 â”‚  + Context  â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚  Response   â”‚
                                 â”‚  (Grounded) â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="why-grounding-matters">Why Grounding Matters</h3>
<p><strong>Ungrounded Response</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">User</span><span class="o">:</span><span class="w"> </span><span class="n">What</span><span class="s1">&#39;s our company&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">policy</span><span class="o">?</span>
<span class="n">Agent</span><span class="o">:</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">believe</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="n">days</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">items</span><span class="o">.</span>
<span class="w">       </span><span class="o">(</span><span class="n">May</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">incorrect</span><span class="o">)</span>
</code></pre></div>

<p><strong>Grounded Response</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">User</span><span class="o">:</span><span class="w"> </span><span class="n">What</span><span class="s1">&#39;s our company&#39;</span><span class="n">s</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">policy</span><span class="o">?</span>
<span class="n">Agent</span><span class="o">:</span><span class="w"> </span><span class="n">According</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Returns</span><span class="w"> </span><span class="n">Policy</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="o">(</span><span class="n">v2</span><span class="o">.</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="n">Jan</span><span class="w"> </span><span class="mi">2024</span><span class="o">),</span>
<span class="w">       </span><span class="n">customers</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="mi">45</span><span class="w"> </span><span class="n">days</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">receipt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">refund</span><span class="o">.</span>
<span class="w">       </span><span class="n">Source</span><span class="o">:</span><span class="w"> </span><span class="n">company_policies</span><span class="o">/</span><span class="n">returns</span><span class="o">.</span><span class="na">pdf</span><span class="o">,</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="mi">2</span>
<span class="w">       </span><span class="o">(</span><span class="n">Factually</span><span class="w"> </span><span class="n">accurate</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">citation</span><span class="o">)</span>
</code></pre></div>

<h2 id="common-grounding-steps">ğŸ’¡ Common Grounding Steps</h2>
<h3 id="step-1-query-understanding">Step 1: Query Understanding</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">GroundedAgent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Agent with grounding capabilities</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">process_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process query with grounding</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Step 1: Understand what information is needed</span>
        <span class="n">query_analysis</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_query</span><span class="p">(</span><span class="n">user_query</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;intent&#39;</span><span class="p">:</span> <span class="n">query_analysis</span><span class="p">[</span><span class="s1">&#39;intent&#39;</span><span class="p">],</span>
            <span class="s1">&#39;entities&#39;</span><span class="p">:</span> <span class="n">query_analysis</span><span class="p">[</span><span class="s1">&#39;entities&#39;</span><span class="p">],</span>
            <span class="s1">&#39;information_needed&#39;</span><span class="p">:</span> <span class="n">query_analysis</span><span class="p">[</span><span class="s1">&#39;facts_required&#39;</span><span class="p">]</span>
        <span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">analyze_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determine what facts are needed to answer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        Analyze this query and identify:</span>
<span class="s2">        1. User&#39;s intent</span>
<span class="s2">        2. Key entities mentioned</span>
<span class="s2">        3. What factual information is needed to answer accurately</span>

<span class="s2">        Query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span>

<span class="s2">        Respond in JSON format.</span>
<span class="s2">        &quot;&quot;&quot;</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div>

<h3 id="step-2-information-retrieval">Step 2: Information Retrieval</h3>
<div class="codehilite"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">retrieve_grounding_information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_analysis</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve factual information to ground the response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">grounding_sources</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Retrieve from authoritative sources</span>
    <span class="k">if</span> <span class="n">query_analysis</span><span class="p">[</span><span class="s1">&#39;intent&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;policy_question&#39;</span><span class="p">:</span>
        <span class="c1"># Get from policy documents</span>
        <span class="n">policy_info</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">policy_db</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
            <span class="n">query_analysis</span><span class="p">[</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">grounding_sources</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;policy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="n">policy_info</span><span class="p">,</span>
            <span class="s1">&#39;authority&#39;</span><span class="p">:</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span>
            <span class="s1">&#39;updated&#39;</span><span class="p">:</span> <span class="n">policy_info</span><span class="p">[</span><span class="s1">&#39;last_modified&#39;</span><span class="p">]</span>
        <span class="p">})</span>

    <span class="k">elif</span> <span class="n">query_analysis</span><span class="p">[</span><span class="s1">&#39;intent&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;factual_question&#39;</span><span class="p">:</span>
        <span class="c1"># Get from knowledge base</span>
        <span class="n">facts</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">knowledge_base</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
            <span class="n">query_analysis</span><span class="p">[</span><span class="s1">&#39;information_needed&#39;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">grounding_sources</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;knowledge_base&#39;</span><span class="p">,</span>
            <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="n">facts</span><span class="p">,</span>
            <span class="s1">&#39;authority&#39;</span><span class="p">:</span> <span class="s1">&#39;medium&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="n">facts</span><span class="p">[</span><span class="s1">&#39;references&#39;</span><span class="p">]</span>
        <span class="p">})</span>

    <span class="c1"># Verify information freshness</span>
    <span class="n">grounding_sources</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_freshness</span><span class="p">(</span><span class="n">grounding_sources</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="n">grounding_sources</span><span class="p">,</span>
        <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_confidence</span><span class="p">(</span><span class="n">grounding_sources</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></div>

<h3 id="step-3-response-generation-with-citations">Step 3: Response Generation with Citations</h3>
<div class="codehilite"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">generate_grounded_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                                    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                                    <span class="n">grounding</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate response grounded in retrieved facts</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Build context from grounding sources</span>
    <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_context</span><span class="p">(</span><span class="n">grounding</span><span class="p">[</span><span class="s1">&#39;sources&#39;</span><span class="p">])</span>

    <span class="c1"># Generate with explicit grounding requirement</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Answer the user&#39;s question using ONLY the provided sources.</span>
<span class="s2">    You MUST cite your sources using [Source N] notation.</span>
<span class="s2">    If the answer is not in the sources, say so explicitly.</span>

<span class="s2">    Question: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span>

<span class="s2">    Authoritative Sources:</span>
<span class="s2">    </span><span class="si">{</span><span class="n">context</span><span class="si">}</span>

<span class="s2">    Requirements:</span>
<span class="s2">    1. Only use information from sources above</span>
<span class="s2">    2. Cite every factual claim with [Source N]</span>
<span class="s2">    3. If uncertain, state your confidence level</span>
<span class="s2">    4. If answer not found, say &quot;I don&#39;t have that information&quot;</span>

<span class="s2">    Response:</span>
<span class="s2">    &quot;&quot;&quot;</span>

    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>

    <span class="c1"># Verify citations</span>
    <span class="n">verified_response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_citations</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">grounding</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">verified_response</span>

<span class="k">def</span> <span class="nf">build_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Format sources for LLM context</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">context_parts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sources</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">context_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        [Source </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">]</span>
<span class="s2">        Type: </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span>
<span class="s2">        Authority: </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="s1">&#39;authority&#39;</span><span class="p">]</span><span class="si">}</span>
<span class="s2">        Content: </span><span class="si">{</span><span class="n">source</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="si">}</span>
<span class="s2">        Last Updated: </span><span class="si">{</span><span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;updated&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">context_parts</span><span class="p">)</span>
</code></pre></div>

<h3 id="step-4-verification-and-validation">Step 4: Verification and Validation</h3>
<div class="codehilite"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">verify_citations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">grounding</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verify that citations in response match sources</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Extract citations from response</span>
    <span class="n">citations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_citations</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="c1"># Verify each claim</span>
    <span class="n">verification_results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">citation</span> <span class="ow">in</span> <span class="n">citations</span><span class="p">:</span>
        <span class="n">claim</span> <span class="o">=</span> <span class="n">citation</span><span class="p">[</span><span class="s1">&#39;claim&#39;</span><span class="p">]</span>
        <span class="n">source_num</span> <span class="o">=</span> <span class="n">citation</span><span class="p">[</span><span class="s1">&#39;source_number&#39;</span><span class="p">]</span>

        <span class="c1"># Check if claim is supported by cited source</span>
        <span class="n">is_supported</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_claim_in_source</span><span class="p">(</span>
            <span class="n">claim</span><span class="p">,</span>
            <span class="n">grounding</span><span class="p">[</span><span class="s1">&#39;sources&#39;</span><span class="p">][</span><span class="n">source_num</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="n">verification_results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;claim&#39;</span><span class="p">:</span> <span class="n">claim</span><span class="p">,</span>
            <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="n">source_num</span><span class="p">,</span>
            <span class="s1">&#39;supported&#39;</span><span class="p">:</span> <span class="n">is_supported</span><span class="p">,</span>
            <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="n">is_supported</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span>
        <span class="p">})</span>

    <span class="c1"># Flag unsupported claims</span>
    <span class="n">unsupported</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">verification_results</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">[</span><span class="s1">&#39;supported&#39;</span><span class="p">]]</span>

    <span class="k">if</span> <span class="n">unsupported</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;response&#39;</span><span class="p">:</span> <span class="n">response</span><span class="p">,</span>
            <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;needs_review&#39;</span><span class="p">,</span>
            <span class="s1">&#39;unsupported_claims&#39;</span><span class="p">:</span> <span class="n">unsupported</span><span class="p">,</span>
            <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="s1">&#39;Remove or rephrase unsupported claims&#39;</span>
        <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;response&#39;</span><span class="p">:</span> <span class="n">response</span><span class="p">,</span>
        <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;verified&#39;</span><span class="p">,</span>
        <span class="s1">&#39;all_claims_supported&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;sources_used&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">citations</span><span class="p">))</span>
    <span class="p">}</span>
</code></pre></div>

<h2 id="deep-dive-grounding-techniques">ğŸ”¬ Deep Dive: Grounding Techniques</h2>
<h3 id="1-source-authority-hierarchy">1. Source Authority Hierarchy</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">SourceAuthority</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manage source authority levels</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">AUTHORITY_LEVELS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Official company documents, policies, databases&#39;</span><span class="p">,</span>
            <span class="s1">&#39;examples&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;policy_docs&#39;</span><span class="p">,</span> <span class="s1">&#39;product_specs&#39;</span><span class="p">,</span> <span class="s1">&#39;legal_docs&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Approved knowledge bases, documentation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;examples&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;wiki&#39;</span><span class="p">,</span> <span class="s1">&#39;faq&#39;</span><span class="p">,</span> <span class="s1">&#39;training_materials&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s1">&#39;tertiary&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Team notes, chat history, emails&#39;</span><span class="p">,</span>
            <span class="s1">&#39;examples&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;slack&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;notes&#39;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s1">&#39;external&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;External sources, web search&#39;</span><span class="p">,</span>
            <span class="s1">&#39;examples&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;web_search&#39;</span><span class="p">,</span> <span class="s1">&#39;public_apis&#39;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">prioritize_sources</span><span class="p">(</span><span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sort sources by authority level</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">get_priority</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
            <span class="n">source_type</span> <span class="o">=</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">level</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">SourceAuthority</span><span class="o">.</span><span class="n">AUTHORITY_LEVELS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">source_type</span> <span class="ow">in</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;examples&#39;</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;priority&#39;</span><span class="p">]</span>
            <span class="k">return</span> <span class="mi">5</span>  <span class="c1"># Unknown sources lowest priority</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sources</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">get_priority</span><span class="p">)</span>


<span class="c1"># Usage</span>
<span class="n">sources</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;web_search&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Public information&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;policy_docs&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Official policy&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;slack&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Team discussion&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">prioritized</span> <span class="o">=</span> <span class="n">SourceAuthority</span><span class="o">.</span><span class="n">prioritize_sources</span><span class="p">(</span><span class="n">sources</span><span class="p">)</span>
<span class="c1"># Result: policy_docs â†’ slack â†’ web_search</span>
</code></pre></div>

<h3 id="2-temporal-grounding">2. Temporal Grounding</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">TemporalGrounding</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensure information is current</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">freshness_threshold_days</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">90</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="n">freshness_threshold_days</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">check_freshness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verify information currency</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">last_updated</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;updated&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">last_updated</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;fresh&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;reason&#39;</span><span class="p">:</span> <span class="s1">&#39;No update timestamp&#39;</span><span class="p">,</span>
                <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="s1">&#39;Verify manually before using&#39;</span>
            <span class="p">}</span>

        <span class="n">age_days</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">last_updated</span><span class="p">)</span><span class="o">.</span><span class="n">days</span>

        <span class="k">if</span> <span class="n">age_days</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">:</span>
            <span class="c1"># Try to find updated version</span>
            <span class="n">updated_source</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_updated_version</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">updated_source</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="s1">&#39;fresh&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s1">&#39;updated_source&#39;</span><span class="p">:</span> <span class="n">updated_source</span><span class="p">,</span>
                    <span class="s1">&#39;note&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Found newer version (</span><span class="si">{</span><span class="n">updated_source</span><span class="p">[</span><span class="s2">&quot;updated&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">)&#39;</span>
                <span class="p">}</span>

            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;fresh&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s1">&#39;age_days&#39;</span><span class="p">:</span> <span class="n">age_days</span><span class="p">,</span>
                <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Information is </span><span class="si">{</span><span class="n">age_days</span><span class="si">}</span><span class="s1"> days old. Consider updating.&#39;</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;fresh&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;age_days&#39;</span><span class="p">:</span> <span class="n">age_days</span>
        <span class="p">}</span>


<span class="c1"># Usage</span>
<span class="n">temporal</span> <span class="o">=</span> <span class="n">TemporalGrounding</span><span class="p">(</span><span class="n">freshness_threshold_days</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Return policy: 30 days&#39;</span><span class="p">,</span>
    <span class="s1">&#39;updated&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">freshness</span> <span class="o">=</span> <span class="k">await</span> <span class="n">temporal</span><span class="o">.</span><span class="n">check_freshness</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">freshness</span><span class="p">[</span><span class="s1">&#39;fresh&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: </span><span class="si">{</span><span class="n">freshness</span><span class="p">[</span><span class="s1">&#39;recommendation&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="3-multi-source-verification">3. Multi-Source Verification</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MultiSourceVerification</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cross-verify information across sources</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">verify_fact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fact</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if fact is supported by multiple sources</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">supporting_sources</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">conflicting_sources</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">sources</span><span class="p">:</span>
            <span class="n">verification</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_fact_in_source</span><span class="p">(</span><span class="n">fact</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">verification</span><span class="p">[</span><span class="s1">&#39;supports&#39;</span><span class="p">]:</span>
                <span class="n">supporting_sources</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">verification</span><span class="p">[</span><span class="s1">&#39;conflicts&#39;</span><span class="p">]:</span>
                <span class="n">conflicting_sources</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="c1"># Determine confidence based on agreement</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">supporting_sources</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">conflicting_sources</span><span class="p">:</span>
            <span class="n">confidence</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">supporting_sources</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">conflicting_sources</span><span class="p">:</span>
            <span class="n">confidence</span> <span class="o">=</span> <span class="s1">&#39;medium&#39;</span>
        <span class="k">elif</span> <span class="n">conflicting_sources</span><span class="p">:</span>
            <span class="n">confidence</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">confidence</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;fact&#39;</span><span class="p">:</span> <span class="n">fact</span><span class="p">,</span>
            <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="n">confidence</span><span class="p">,</span>
            <span class="s1">&#39;supporting_sources&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">supporting_sources</span><span class="p">),</span>
            <span class="s1">&#39;conflicting_sources&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">conflicting_sources</span><span class="p">),</span>
            <span class="s1">&#39;recommendation&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recommendation</span><span class="p">(</span><span class="n">confidence</span><span class="p">,</span> <span class="n">conflicting_sources</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_recommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">confidence</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">conflicts</span><span class="p">:</span> <span class="n">List</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Provide recommendation based on verification</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">confidence</span> <span class="o">==</span> <span class="s1">&#39;high&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Fact verified across multiple sources. Safe to use.&#39;</span>
        <span class="k">elif</span> <span class="n">confidence</span> <span class="o">==</span> <span class="s1">&#39;medium&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Fact supported by one source. Consider finding additional confirmation.&#39;</span>
        <span class="k">elif</span> <span class="n">conflicts</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Conflicting information found. Investigate discrepancy before using.&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Fact not found in sources. Do not use.&#39;</span>
</code></pre></div>

<h2 id="quick-win-basic-grounding-system">âš¡ Quick Win: Basic Grounding System</h2>
<h3 id="15-minute-implementation">15-Minute Implementation</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">SimpleGrounding</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Lightweight grounding for quick implementation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">knowledge_base</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kb</span> <span class="o">=</span> <span class="n">knowledge_base</span>

    <span class="k">def</span> <span class="nf">answer_grounded</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Answer with grounding</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Search knowledge base</span>
        <span class="n">relevant_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_kb</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">relevant_info</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;answer&#39;</span><span class="p">:</span> <span class="s2">&quot;I don&#39;t have information about that in my knowledge base.&quot;</span><span class="p">,</span>
                <span class="s1">&#39;grounded&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">}</span>

        <span class="c1"># Generate answer from sources only</span>
        <span class="n">answer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_from_sources</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="n">relevant_info</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;answer&#39;</span><span class="p">:</span> <span class="n">answer</span><span class="p">,</span>
            <span class="s1">&#39;grounded&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;sources&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">relevant_info</span><span class="p">],</span>
            <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">relevant_info</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3</span>  <span class="c1"># Simple confidence metric</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">search_kb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simple keyword search</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">keywords</span> <span class="o">=</span> <span class="n">question</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">doc_id</span><span class="p">,</span> <span class="n">doc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kb</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">content_lower</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">matches</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">keywords</span> <span class="k">if</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">content_lower</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">matches</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">doc_id</span><span class="p">,</span>
                    <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;relevance&#39;</span><span class="p">:</span> <span class="n">matches</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">keywords</span><span class="p">)</span>
                <span class="p">})</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;relevance&#39;</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">generate_from_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create answer from sources with citations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">answer_parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sources</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="c1"># Extract relevant sentence</span>
            <span class="n">relevant</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_relevant_sentence</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">relevant</span><span class="p">:</span>
                <span class="n">answer_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">relevant</span><span class="si">}</span><span class="s2"> [Source </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">answer_parts</span><span class="p">)</span> <span class="k">if</span> <span class="n">answer_parts</span> <span class="k">else</span> <span class="s2">&quot;No specific information found.&quot;</span>


<span class="c1"># Usage</span>
<span class="n">kb</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;policy_1&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Customers have 45 days to return items with receipt.&#39;</span><span class="p">,</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;policy&#39;</span>
    <span class="p">},</span>
    <span class="s1">&#39;policy_2&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Refunds are processed within 5-7 business days.&#39;</span><span class="p">,</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;policy&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">grounding</span> <span class="o">=</span> <span class="n">SimpleGrounding</span><span class="p">(</span><span class="n">kb</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">grounding</span><span class="o">.</span><span class="n">answer_grounded</span><span class="p">(</span><span class="s2">&quot;What is the return policy?&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;answer&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sources used: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;sources&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Confidence: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h2 id="real-world-grounding-patterns">ğŸ¯ Real-World Grounding Patterns</h2>
<h3 id="pattern-1-customer-support">Pattern 1: Customer Support</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CustomerSupportGrounding</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Grounded customer support agent</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">policy_db</span> <span class="o">=</span> <span class="n">PolicyDatabase</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order_db</span> <span class="o">=</span> <span class="n">OrderDatabase</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">product_db</span> <span class="o">=</span> <span class="n">ProductDatabase</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">answer_customer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Answer with grounding in customer-specific data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get customer context</span>
        <span class="n">customer_info</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_db</span><span class="o">.</span><span class="n">get_customer</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>

        <span class="c1"># Determine question type</span>
        <span class="n">question_type</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">classify_question</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>

        <span class="c1"># Ground in appropriate source</span>
        <span class="k">if</span> <span class="n">question_type</span> <span class="o">==</span> <span class="s1">&#39;order_status&#39;</span><span class="p">:</span>
            <span class="n">grounding</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_db</span><span class="o">.</span><span class="n">get_order_details</span><span class="p">(</span>
                <span class="n">customer_info</span><span class="p">[</span><span class="s1">&#39;recent_orders&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">source_type</span> <span class="o">=</span> <span class="s1">&#39;order_database&#39;</span>

        <span class="k">elif</span> <span class="n">question_type</span> <span class="o">==</span> <span class="s1">&#39;policy&#39;</span><span class="p">:</span>
            <span class="n">grounding</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">policy_db</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>
            <span class="n">source_type</span> <span class="o">=</span> <span class="s1">&#39;policy_document&#39;</span>

        <span class="k">elif</span> <span class="n">question_type</span> <span class="o">==</span> <span class="s1">&#39;product&#39;</span><span class="p">:</span>
            <span class="n">grounding</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">product_db</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>
            <span class="n">source_type</span> <span class="o">=</span> <span class="s1">&#39;product_catalog&#39;</span>

        <span class="c1"># Generate grounded response</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_response</span><span class="p">(</span>
            <span class="n">question</span><span class="p">,</span>
            <span class="n">grounding</span><span class="p">,</span>
            <span class="n">source_type</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;response&#39;</span><span class="p">:</span> <span class="n">response</span><span class="p">,</span>
            <span class="s1">&#39;grounded_in&#39;</span><span class="p">:</span> <span class="n">source_type</span><span class="p">,</span>
            <span class="s1">&#39;customer_specific&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;verifiable&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
</code></pre></div>

<h3 id="pattern-2-technical-documentation">Pattern 2: Technical Documentation</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">TechnicalDocGrounding</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Grounded technical documentation assistant</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">answer_technical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Answer technical questions with code examples and docs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Search official documentation</span>
        <span class="n">doc_results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_official_docs</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>

        <span class="c1"># Search code examples</span>
        <span class="n">code_results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_code_examples</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>

        <span class="c1"># Prioritize official docs</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prioritize</span><span class="p">([</span>
            <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;official_docs&#39;</span><span class="p">,</span> <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">doc_results</span><span class="p">,</span> <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;code_examples&#39;</span><span class="p">,</span> <span class="s1">&#39;results&#39;</span><span class="p">:</span> <span class="n">code_results</span><span class="p">,</span> <span class="s1">&#39;priority&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="p">])</span>

        <span class="c1"># Generate with citations and code examples</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_technical_response</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="n">sources</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;response&#39;</span><span class="p">:</span> <span class="n">response</span><span class="p">,</span>
            <span class="s1">&#39;documentation_links&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">doc_results</span><span class="p">],</span>
            <span class="s1">&#39;code_examples&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">code_results</span><span class="p">],</span>
            <span class="s1">&#39;api_version&#39;</span><span class="p">:</span> <span class="n">sources</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;latest&#39;</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div>

<h2 id="key-takeaways">ğŸ¯ Key Takeaways</h2>
<ul>
<li><strong>Grounding prevents hallucination</strong> by anchoring in facts</li>
<li><strong>Source authority matters</strong> - prioritize official sources</li>
<li><strong>Citations are essential</strong> - every claim needs a source</li>
<li><strong>Verify freshness</strong> - ensure information is current</li>
<li><strong>Multi-source verification</strong> builds confidence</li>
<li><strong>Explicit limitations</strong> - admit when information isn't available</li>
</ul>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-always-provide-sources">1. Always Provide Sources</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># âœ… Good: With citation</span>
<span class="s2">&quot;Returns accepted within 45 days [Policy Doc, Section 3.1]&quot;</span>

<span class="c1"># âŒ Bad: No citation</span>
<span class="s2">&quot;Returns accepted within 45 days&quot;</span>
</code></pre></div>

<h3 id="2-admit-limitations">2. Admit Limitations</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># âœ… Good: Honest about gaps</span>
<span class="s2">&quot;I found information about X and Y, but I don&#39;t have data about Z in my sources.&quot;</span>

<span class="c1"># âŒ Bad: Guessing</span>
<span class="s2">&quot;Z is probably similar to X...&quot;</span>
</code></pre></div>

<h3 id="3-show-confidence-levels">3. Show Confidence Levels</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># âœ… Good: Transparent confidence</span>
<span class="s2">&quot;Based on 3 consistent sources: [High confidence]&quot;</span>
<span class="s2">&quot;Based on 1 source only: [Medium confidence]&quot;</span>

<span class="c1"># âŒ Bad: No confidence indicator</span>
<span class="s2">&quot;The answer is...&quot;</span>
</code></pre></div>

<h2 id="next-steps">Next Steps</h2>
<p>You've completed the RAG section! Continue to:<br />
- <a href="../agents/01-adk-overview.md">Agent Development Kits</a> for agent implementation<br />
- <a href="../tools/03-tool-ecosystems.md">Tool Ecosystems</a> for integration patterns<br />
- <a href="../advanced/03-deployment.md">Production Deployment</a> for scaling</p>
<hr />
<p>ğŸ’¡ <strong>Remember</strong>: Grounding is the difference between an agent that sounds good and one that is actually reliable.</p>
                </div>
                
                <footer class="book-footer">
                    <div class="book-footer-content">
                        <p>Built with BookGen - A modern GitBook alternative</p>
                        <p>Generated on 2025-11-15 19:18:13</p>
                    </div>
                </footer>
            </main>
            
            
        </div>
    </div>
    
    <script src="/assets/script.js"></script>
</body>
</html>